<!DOCTYPE html>
<html lang="de">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ethnic Progress Bar</title>
  <link
    href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=DM+Sans:wght@300;400;500&display=swap"
    rel="stylesheet">
  <style>
    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   BASE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    *,
    *::before,
    *::after {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg: #07090e;
      --s1: #0d1219;
      --s2: #111827;
      --s3: #161f2e;
      --gold: #c8962a;
      --goldl: #e4b048;
      --cream: #ede6d8;
      --text: #bab5ab;
      --muted: #525c6e;
      --b1: rgba(200, 150, 42, 0.13);
      --b2: rgba(200, 150, 42, 0.06);
      --nav-h: 46px;
    }

    html,
    body {
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: var(--bg);
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      font-size: 15px;
      /* Base font increased */
      display: flex;
      flex-direction: column;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   NAV
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .nav {
      height: var(--nav-h);
      flex-shrink: 0;
      background: rgba(7, 9, 14, 0.96);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--b1);
      display: flex;
      align-items: center;
      gap: 0.9rem;
      padding: 0 1.4rem;
      z-index: 300;
    }

    .nav-logo {
      font-family: 'Playfair Display', serif;
      font-size: 0.95rem;
      font-weight: 700;
      color: var(--gold);
      text-decoration: none;
    }

    .nav-div {
      width: 1px;
      height: 14px;
      background: var(--b1);
    }

    .nav-hint {
      font-size: 0.7rem;
      color: var(--muted);
    }

    .nav-back {
      margin-left: auto;
      font-size: 0.7rem;
      color: var(--muted);
      text-decoration: none;
      padding: 0.25rem 0.65rem;
      border: 1px solid var(--b1);
      transition: all .18s;
    }

    .nav-back:hover {
      color: var(--gold);
      border-color: var(--gold);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   APP SHELL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .app {
      flex: 1;
      min-height: 0;
      display: flex;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   SIDEBAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .sb {
      width: 340px;
      flex-shrink: 0;
      /* Width increased from 256px */
      background: var(--s1);
      border-right: 1px solid var(--b1);
      display: flex;
      flex-direction: column;
      overflow-y: auto;
      overflow-x: hidden;
    }

    .sb::-webkit-scrollbar {
      width: 3px;
    }

    .sb::-webkit-scrollbar-thumb {
      background: rgba(200, 150, 42, 0.18);
      border-radius: 2px;
    }

    /* â”€â”€ Brand â”€â”€ */
    .sb-brand {
      padding: 1rem 1rem 0.85rem;
      border-bottom: 1px solid var(--b2);
      background: linear-gradient(180deg, var(--s2) 0%, var(--s1) 100%);
    }

    .sb-brand-title {
      font-family: 'Playfair Display', serif;
      font-size: 1.4rem;
      font-weight: 900;
      color: var(--cream);
      line-height: 1;
    }

    .sb-brand-title em {
      color: var(--gold);
      font-style: normal;
    }

    .sb-brand-sub {
      font-size: 0.8rem;
      color: var(--muted);
      margin-top: 0.4rem;
      line-height: 1.5;
    }

    /* â”€â”€ Generic section â”€â”€ */
    .sb-sec {
      border-bottom: 1px solid var(--b2);
      padding: 0.9rem 1.1rem;
    }

    .sb-sec:last-child {
      border-bottom: none;
    }

    .sb-lbl {
      font-size: 0.7rem;
      letter-spacing: 0.22em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 0.7rem;
    }

    /* â”€â”€ View tabs â”€â”€ */
    .vtabs {
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

    .vt {
      display: flex;
      align-items: center;
      gap: 0.55rem;
      padding: 0.5rem 0.75rem;
      border: 1px solid var(--b2);
      background: transparent;
      color: var(--muted);
      font-family: 'DM Sans', sans-serif;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all .15s;
      text-align: left;
      width: 100%;
    }

    .vt-icon {
      font-size: 1rem;
      flex-shrink: 0;
    }

    .vt.on {
      background: var(--s3);
      border-color: var(--gold);
      color: var(--cream);
    }

    .vt:hover:not(.on) {
      border-color: rgba(200, 150, 42, 0.35);
      color: var(--text);
    }

    .vt-desc {
      margin-top: 0.5rem;
      padding: 0.65rem 0.85rem;
      background: var(--s2);
      border-left: 2px solid var(--gold);
      font-size: 0.8rem;
      color: var(--muted);
      line-height: 1.6;
    }

    /* â”€â”€ Filter chips â”€â”€ */
    .chips {
      display: flex;
      flex-direction: column;
      gap: 0.18rem;
    }

    .ch {
      padding: 0.4rem 0.75rem;
      font-size: 0.85rem;
      border: 1px solid var(--b2);
      background: transparent;
      color: var(--muted);
      cursor: pointer;
      transition: all .15s;
      font-family: 'DM Sans', sans-serif;
      text-align: left;
      width: 100%;
    }

    .ch.on {
      background: rgba(200, 150, 42, 0.1);
      border-color: var(--gold);
      color: var(--goldl);
      font-weight: 500;
    }

    .ch:hover:not(.on) {
      border-color: rgba(200, 150, 42, 0.3);
      color: var(--text);
    }

    /* â”€â”€ Select dropdowns â”€â”€ */
    .sb-ctls {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }

    .sb-ctl {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .sb-ctl-lbl {
      font-size: 0.65rem;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: var(--muted);
    }

    .sw {
      position: relative;
    }

    .sw select {
      appearance: none;
      width: 100%;
      background: var(--bg);
      border: 1px solid var(--b2);
      color: var(--text);
      font-family: 'DM Sans', sans-serif;
      font-size: 0.8rem;
      padding: 0.4rem 1.6rem 0.4rem 0.6rem;
      cursor: pointer;
      outline: none;
    }

    .sw select:hover {
      border-color: rgba(200, 150, 42, 0.35);
    }

    .sw::after {
      content: 'â–¾';
      position: absolute;
      right: 0.4rem;
      top: 50%;
      transform: translateY(-50%);
      color: var(--gold);
      font-size: 0.6rem;
      pointer-events: none;
    }

    /* â”€â”€ Context Box â”€â”€ */
    .m-ctx {
      margin-bottom: 1.4rem;
      padding: 1rem 1.2rem;
      background: rgba(200, 150, 42, 0.05);
      border-left: 4px solid var(--muted);
      font-style: italic;
      color: var(--text);
      font-size: 0.9rem;
      line-height: 1.6;
    }

    .m-ctx-t {
      font-size: 0.7rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--muted);
      margin-bottom: 0.4rem;
      font-style: normal;
    }

    /* â”€â”€ Legend â”€â”€ */
    .leg-grid {
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
    }

    .leg-row {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      font-size: 0.8rem;
    }

    .leg-dot {
      width: 8px;
      height: 8px;
      border-radius: 1px;
      flex-shrink: 0;
    }

    .leg-name {
      flex: 1;
      color: var(--text);
    }

    .leg-bar {
      width: 50px;
      height: 3px;
      background: var(--b2);
      border-radius: 1px;
      overflow: hidden;
      flex-shrink: 0;
    }

    .leg-bar-f {
      height: 100%;
      border-radius: 1px;
    }

    .leg-pts {
      font-size: 0.7rem;
      color: var(--gold);
      min-width: 38px;
      text-align: right;
      opacity: 0.8;
    }

    /* â”€â”€ Methodology accordion â”€â”€ */
    .meth-hdr {
      width: 100%;
      display: flex;
      align-items: center;
      justify-content: space-between;
      background: none;
      border: none;
      padding: 0;
      font-family: 'DM Sans', sans-serif;
      font-size: 0.8rem;
      color: var(--muted);
      cursor: pointer;
      transition: color .15s;
    }

    .meth-hdr:hover {
      color: var(--gold);
    }

    .meth-arr {
      font-size: 0.58rem;
      transition: transform .22s;
      display: inline-block;
    }

    .meth-hdr.on .meth-arr {
      transform: rotate(90deg);
    }

    .meth-body {
      overflow: hidden;
      max-height: 0;
      transition: max-height .35s ease;
    }

    .meth-body.on {
      max-height: 1200px;
    }

    .meth-inner {
      margin-top: 0.6rem;
      display: flex;
      flex-direction: column;
      gap: 0.35rem;
    }

    .meth-group-title {
      font-size: 0.57rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--gold);
      padding-top: 0.45rem;
      margin-top: 0.1rem;
      border-top: 1px solid var(--b2);
    }

    .meth-group-title:first-child {
      border-top: none;
      padding-top: 0;
      margin-top: 0;
    }

    .meth-dim {
      background: var(--bg);
      border: 1px solid var(--b2);
      padding: 0.38rem 0.5rem;
    }

    .meth-dim-t {
      font-size: 0.6rem;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 0.12rem;
    }

    .meth-dim p {
      font-size: 0.65rem;
      color: var(--muted);
      line-height: 1.5;
    }

    .meth-eq {
      padding: 0.4rem 0.55rem;
      background: var(--bg);
      border-left: 2px solid var(--gold);
      font-size: 0.65rem;
      color: var(--text);
      line-height: 1.6;
      margin-top: 0.2rem;
    }

    .meth-eq strong {
      color: var(--gold);
    }

    .meth-note {
      font-size: 0.62rem;
      color: var(--muted);
      font-style: italic;
      line-height: 1.5;
      margin-top: 0.2rem;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN + CHART
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .main {
      flex: 1;
      min-width: 0;
      min-height: 0;
      display: flex;
      flex-direction: column;
      padding: 0.9rem 1.1rem;
      gap: 0;
      overflow: hidden;
    }

    .chart-shell {
      flex: 1;
      min-height: 0;
      background: var(--s1);
      border: 1px solid var(--b1);
      display: flex;
      flex-direction: column;
      position: relative;
      overflow: hidden;
    }

    /* Rotated Y label */
    .y-vert {
      position: absolute;
      left: 0.35rem;
      top: 50%;
      writing-mode: vertical-lr;
      transform: rotate(180deg) translateY(50%);
      font-size: 0.55rem;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--muted);
      white-space: nowrap;
      pointer-events: none;
      z-index: 2;
    }

    /* inner flex: y-axis col + plot area */
    .c-layout {
      display: flex;
      padding: 0.85rem 0.9rem 0 2.5rem;
      min-height: 0;
      flex-shrink: 0;
    }

    .y-col {
      width: 40px;
      flex-shrink: 0;
      position: relative;
    }

    .plot {
      flex: 1;
      position: relative;
      min-width: 0;
      overflow: hidden;
    }

    /* Y ticks */
    .ytick {
      position: absolute;
      right: 0;
      display: flex;
      align-items: center;
      gap: 3px;
      transform: translateY(50%);
    }

    .ytick-lbl {
      font-size: 0.57rem;
      color: var(--muted);
      white-space: nowrap;
    }

    .ytick-mk {
      width: 4px;
      height: 1px;
      background: rgba(200, 150, 42, 0.3);
    }

    /* Grid */
    .hgl {
      position: absolute;
      left: 0;
      right: 0;
      height: 1px;
      background: var(--b2);
      pointer-events: none;
    }

    .base {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 2px;
      background: rgba(200, 150, 42, 0.35);
      z-index: 3;
    }

    /* â”€â”€ grouped bars â”€â”€ */
    .bars {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: flex-end;
      gap: 5px;
      padding: 0 2px;
    }

    .bgrp {
      flex: 1;
      min-width: 0;
      height: 100%;
      display: flex;
      align-items: flex-end;
    }

    .bstk {
      width: 100%;
      display: flex;
      flex-direction: column-reverse;
      overflow: hidden;
    }

    .bseg {
      width: 100%;
      flex-shrink: 0;
      cursor: pointer;
      transition: filter .13s;
      border-top: 1px solid rgba(0, 0, 0, 0.14);
    }

    .bseg:hover {
      filter: brightness(1.35);
      position: relative;
      z-index: 8;
    }

    .bseg:last-child {
      border-top-left-radius: 2px;
      border-top-right-radius: 2px;
    }

    /* â”€â”€ timeline bars â”€â”€ */
    .tl-canvas {
      position: absolute;
      inset: 0;
      overflow: hidden;
    }

    .tl-bar {
      position: absolute;
      bottom: 0;
      z-index: 2;
      cursor: pointer;
      border-top-left-radius: 2px;
      border-top-right-radius: 2px;
      transition: filter .13s;
    }

    .tl-bar:hover {
      filter: brightness(1.35);
      z-index: 10;
    }

    .tl-era {
      position: absolute;
      bottom: 0;
      top: 0;
      width: 1px;
      background: rgba(200, 150, 42, 0.1);
      pointer-events: none;
    }

    .tl-era-l {
      position: absolute;
      font-size: 0.54rem;
      color: rgba(82, 92, 110, 0.5);
      transform: translateX(-50%);
      white-space: nowrap;
      pointer-events: none;
    }

    /* â”€â”€ x/labels strip â”€â”€ */
    .x-strip {
      flex-shrink: 0;
      border-top: 1px solid rgba(200, 150, 42, 0.2);
      background: var(--s1);
    }

    /* grouped labels */
    .glabels {
      display: flex;
      gap: 5px;
      padding: 0.38rem 0.9rem 0.55rem calc(2.5rem + 40px + 2px);
    }

    .glbl {
      flex: 1;
      min-width: 0;
      text-align: center;
    }

    .glbl-n {
      font-size: 0.63rem;
      color: var(--text);
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .glbl-m {
      font-size: 0.55rem;
      color: var(--muted);
      margin-top: 0.12rem;
    }

    /* timeline info */
    .tlinfo {
      padding: 0.38rem 0.9rem 0.55rem calc(2.5rem + 40px + 6px);
      font-size: 0.6rem;
      color: var(--muted);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOOLTIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .tt {
      position: fixed;
      z-index: 9000;
      background: var(--s2);
      border: 1px solid rgba(200, 150, 42, 0.4);
      padding: 0.95rem 1.1rem;
      max-width: 320px;
      min-width: 240px;
      pointer-events: none;
      opacity: 0;
      transform: translateY(4px);
      transition: opacity .1s, transform .1s;
      box-shadow: 0 10px 35px rgba(0, 0, 0, 0.65);
    }

    .tt.on {
      opacity: 1;
      transform: translateY(0);
    }

    .tt-yr {
      font-size: 0.7rem;
      letter-spacing: 0.14em;
      color: var(--gold);
      text-transform: uppercase;
      margin-bottom: 0.25rem;
    }

    .tt-nm {
      font-family: 'Playfair Display', serif;
      font-size: 1.1rem;
      color: var(--cream);
      margin-bottom: 0.3rem;
      line-height: 1.2;
    }

    .tt-grp {
      font-size: 0.75rem;
      margin-bottom: 0.3rem;
    }

    .tt-cat {
      font-size: 0.75rem;
      color: var(--muted);
      margin-bottom: 0.5rem;
    }

    .tt-dsc {
      font-size: 0.85rem;
      color: var(--muted);
      line-height: 1.6;
    }

    .tt-row {
      display: flex;
      align-items: center;
      gap: 0.38rem;
      margin-top: 0.55rem;
    }

    .tt-rl {
      font-size: 0.6rem;
      color: var(--muted);
      text-transform: uppercase;
      letter-spacing: 0.07em;
    }

    .tt-rb {
      flex: 1;
      height: 2.5px;
      background: rgba(200, 150, 42, 0.1);
      border-radius: 2px;
      overflow: hidden;
    }

    .tt-rf {
      height: 100%;
      border-radius: 2px;
    }

    .tt-rn {
      font-size: 0.7rem;
      color: var(--gold);
      font-weight: 500;
      min-width: 22px;
      text-align: right;
    }

    .tt-hint {
      margin-top: 0.38rem;
      font-size: 0.6rem;
      color: rgba(82, 92, 110, 0.5);
      font-style: italic;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MODAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .modal-bg {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      z-index: 600;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 1.5rem;
      opacity: 0;
      pointer-events: none;
      transition: opacity .22s;
      backdrop-filter: blur(5px);
    }

    .modal-bg.on {
      opacity: 1;
      pointer-events: all;
    }

    .modal {
      background: var(--s1);
      border: 1px solid rgba(200, 150, 42, 0.28);
      max-width: 720px;
      width: 100%;
      max-height: 88vh;
      overflow-y: auto;
      padding: 1.75rem;
      position: relative;
      transform: scale(0.96) translateY(12px);
      transition: transform .22s;
    }

    .modal-bg.on .modal {
      transform: scale(1) translateY(0);
    }

    .modal-x {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: var(--muted);
      font-size: 1.4rem;
      cursor: pointer;
      padding: 0.4rem;
    }

    .modal-x:hover {
      color: var(--cream);
    }

    .m-cat {
      font-size: 0.75rem;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 0.5rem;
    }

    .m-h {
      font-family: 'Playfair Display', serif;
      font-size: 1.9rem;
      font-weight: 700;
      color: var(--cream);
      margin-bottom: 0.6rem;
    }

    .m-meta {
      font-size: 0.9rem;
      color: var(--muted);
      margin-bottom: 1.4rem;
      display: flex;
      gap: 1.2rem;
      flex-wrap: wrap;
    }

    .m-imp {
      background: var(--bg);
      padding: 1rem 1.2rem;
      margin-bottom: 1.2rem;
      border-left: 4px solid var(--gold);
    }

    .m-imp-t {
      font-size: 0.7rem;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 0.4rem;
    }

    .m-imp p {
      font-size: 0.95rem;
      color: var(--text);
      line-height: 1.7;
    }

    .m-body {
      font-size: 0.95rem;
      color: var(--muted);
      line-height: 1.8;
    }

    .m-sc {
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--b1);
    }

    .m-sc-t {
      font-size: 0.7rem;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: var(--gold);
      margin-bottom: 0.8rem;
    }

    .m-row {
      display: flex;
      align-items: center;
      gap: 0.85rem;
      margin-bottom: 0.5rem;
    }

    .m-rl {
      font-size: 0.85rem;
      color: var(--muted);
      width: 180px;
      flex-shrink: 0;
    }

    .m-rb {
      flex: 1;
      height: 6px;
      background: rgba(200, 150, 42, 0.09);
      border-radius: 3px;
      overflow: hidden;
    }

    .m-rf {
      height: 100%;
      border-radius: 3px;
    }

    .m-rn {
      font-size: 0.85rem;
      color: var(--text);
      min-width: 40px;
      text-align: right;
    }

    .m-tot {
      display: flex;
      justify-content: space-between;
      margin-top: 0.65rem;
      padding-top: 0.65rem;
      border-top: 1px solid var(--b2);
    }

    .m-tot-l {
      font-size: 0.76rem;
      color: var(--cream);
    }

    .m-tot-n {
      font-size: 0.86rem;
      color: var(--gold);
      font-weight: 600;
    }

    ::-webkit-scrollbar {
      width: 3px;
      height: 3px;
    }

    ::-webkit-scrollbar-track {
      background: var(--bg);
    }

    ::-webkit-scrollbar-thumb {
      background: rgba(200, 150, 42, 0.2);
      border-radius: 2px;
    }
  </style>
</head>

<body>

  <!-- NAV -->
  <nav class="nav">
    <a class="nav-logo" href="index.html">EPB</a>
    <div class="nav-div"></div>
    <span class="nav-hint">Ethnic Progress Bar Â· Visualisierung</span>
    <a class="nav-back" href="index.html">â† ZurÃ¼ck</a>
  </nav>

  <!-- APP SHELL -->
  <div class="app">

    <!-- SIDEBAR -->
    <aside class="sb">

      <div class="sb-brand">
        <div class="sb-brand-title">Ethnic <em>Progress Bar</em></div>
        <div class="sb-brand-sub">Bedeutende BeitrÃ¤ge zur Menschheit â€“ nach Einfluss &amp; Ursprung visualisiert.
        </div>
      </div>

      <!-- Thema / Dataset Switch -->
      <div class="sb-sec">
        <div class="sb-lbl">Thema</div>
        <div class="vtabs" id="dtabs">
          <button class="vt on" data-d="inv"><span class="vt-icon">ğŸ› </span> Erfindungen</button>
          <button class="vt" data-d="nobel"><span class="vt-icon">ğŸ…</span> Nobelpreise</button>
        </div>
      </div>

      <!-- Ansicht -->
      <div class="sb-sec">
        <div class="sb-lbl">Ansicht</div>
        <div class="vtabs" id="vtabs">
          <button class="vt on" data-v="grouped"><span class="vt-icon">ğŸ“Š</span> Nach Kulturkreis</button>
          <button class="vt" data-v="timeline"><span class="vt-icon">ğŸ“…</span> Zeitstrahl</button>
          <button class="vt" data-v="revolution"><span class="vt-icon">âš¡</span> RevolutionÃ¤r fÃ¼r ihre Zeit</button>
        </div>
        <div class="vt-desc" id="vtDesc"></div>
      </div>

      <!-- Kategorie -->
      <div class="sb-sec">
        <div class="sb-lbl">Kategorie</div>
        <div class="chips" id="chips">
          <button class="ch on" data-c="all">Alle</button>
          <button class="ch" data-c="Medizin">ğŸ¥ Medizin</button>
          <button class="ch" data-c="Physik & Technik">âš™ï¸ Physik &amp; Technik</button>
          <button class="ch" data-c="Mathematik">ğŸ”¢ Mathematik</button>
          <button class="ch" data-c="Kommunikation">ğŸ“¡ Kommunikation</button>
          <button class="ch" data-c="Wirtschaft">ğŸ’° Wirtschaft</button>
          <button class="ch" data-c="Infrastruktur">ğŸ—ï¸ Infrastruktur</button>
        </div>
      </div>

      <!-- Sortierung (hidden in timeline) -->
      <div class="sb-sec" id="sortSec">
        <div class="sb-lbl">Optionen</div>
        <div class="sb-ctls">
          <div class="sb-ctl"><span class="sb-ctl-lbl">Sortierung</span>
            <div class="sw"><select id="sortSel">
                <option value="score">Nach Gesamteinfluss</option>
                <option value="count">Nach Anzahl Erfindungen</option>
                <option value="alpha">Alphabetisch</option>
                <option value="oldest">Nach Ã¤ltester Erfindung</option>
              </select></div>
          </div>
          <div class="sb-ctl"><span class="sb-ctl-lbl">Mindest-Score</span>
            <div class="sw"><select id="minSel">
                <option value="0">Alle zeigen</option>
                <option value="40">â‰¥ 40 Punkte</option>
                <option value="60">â‰¥ 60 Punkte</option>
                <option value="75">â‰¥ 75 Punkte</option>
              </select></div>
          </div>
        </div>
      </div>

      <!-- Legende -->
      <div class="sb-sec">
        <div class="sb-lbl">Kulturkreise</div>
        <div class="leg-grid" id="legGrid"></div>
      </div>

      <!-- Methodik -->
      <div class="sb-sec">
        <button class="meth-hdr" id="methHdr">
          <span>â„¹ï¸ Score-Methodik</span>
          <span class="meth-arr">â–¶</span>
        </button>
        <div class="meth-body" id="methBody">
          <div class="meth-inner">

            <div class="meth-group-title">Score A â€“ Gesellschaftlicher Nutzen heute (max. 100)</div>
            <div class="meth-dim">
              <div class="meth-dim-t">ğŸŒ Reichweite (0â€“25)</div>
              <p>Lokal (â‰¤8) Â· Regional (9â€“15) Â· Kontinental (16â€“21) Â· Global (22â€“25)</p>
            </div>
            <div class="meth-dim">
              <div class="meth-dim-t">â³ Dauerhaftigkeit (0â€“25)</div>
              <p>Jahrzehnte (â‰¤10) Â· Jahrhunderte (11â€“18) Â· Dauerhaft/Jahrtausende (19â€“25)</p>
            </div>
            <div class="meth-dim">
              <div class="meth-dim-t">ğŸ”— Multiplikator (0â€“30)</div>
              <p>Gering (â‰¤10) Â· Mittel (11â€“20) Â· Transformativ, viele Folgeerfindungen (21â€“30)</p>
            </div>
            <div class="meth-dim">
              <div class="meth-dim-t">ğŸ¥ LebensqualitÃ¤t (0â€“20)</div>
              <p>Minimal (â‰¤6) Â· SpÃ¼rbar (7â€“13) Â· Fundamental (14â€“20)</p>
            </div>
            <div class="meth-eq"><strong>Score A = Reichweite + Dauerhaftigkeit + Multiplikator +
                LebensqualitÃ¤t</strong></div>

            <div class="meth-group-title">Score B â€“ RevolutionÃ¤r fÃ¼r ihre Zeit (max. 100)</div>
            <div class="meth-dim">
              <div class="meth-dim-t">ğŸ§  Konzeptbruch (0â€“40)</div>
              <p>Logische Weiterentwicklung (â‰¤10) Â· Ãœberraschend (11â€“25) Â· VollstÃ¤ndig ohne VorlÃ¤ufer (26â€“40)</p>
            </div>
            <div class="meth-dim">
              <div class="meth-dim-t">âš¡ Sofortwirkung (0â€“30)</div>
              <p>Langsam (â‰¤10) Â· Innerhalb einer Generation (11â€“20) Â· Sofort &amp; massiv (21â€“30)</p>
            </div>
            <div class="meth-dim">
              <div class="meth-dim-t">ğŸŒ Gesellschafts-Schock (0â€“30)</div>
              <p>Kaum (â‰¤8) Â· Merklich (9â€“18) Â· ErschÃ¼tterte Weltbild &amp; Ordnung (19â€“30)</p>
            </div>
            <div class="meth-eq"><strong>Score B = Konzeptbruch + Sofortwirkung + Gesellschafts-Schock</strong></div>
            <div class="meth-note">Antike Erfindungen ohne VorlÃ¤ufer (Landwirtschaft B=98, Schrift B=94) dominieren
              Score B. Das Internet (B=56) war einflussreich, aber in einer Welt, die bereits Computer kannte.</div>

          </div>
        </div>
      </div>

    </aside>

    <!-- MAIN CHART AREA -->
    <main class="main" id="mainEl">
      <div class="chart-shell" id="shell">
        <div class="y-vert" id="yLbl">Gesellschaftlicher Einfluss</div>
        <!-- chart body injected here by JS -->
        <div id="cBody" style="flex:1;min-height:0;display:flex;flex-direction:column;"></div>
        <div class="x-strip" id="xStrip"></div>
      </div>
    </main>

  </div>

  <!-- TOOLTIP -->
  <div class="tt" id="tt">
    <div class="tt-yr" id="ttYr"></div>
    <div class="tt-nm" id="ttNm"></div>
    <div class="tt-grp" id="ttGrp"></div>
    <div class="tt-cat" id="ttCat"></div>
    <div class="tt-dsc" id="ttDsc"></div>
    <div class="tt-row">
      <span class="tt-rl" id="ttRl">Score</span>
      <div class="tt-rb">
        <div class="tt-rf" id="ttRf"></div>
      </div>
      <span class="tt-rn" id="ttRn"></span>
    </div>
    <div class="tt-hint">Klicken fÃ¼r Details â†—</div>
  </div>

  <!-- MODAL -->
  <div class="modal-bg" id="modalBg">
    <div class="modal">
      <button class="modal-x" id="modalX">âœ•</button>
      <div class="m-cat" id="mCat"></div>
      <h2 class="m-h" id="mH"></h2>
      <div class="m-meta" id="mMeta"></div>
      <div class="m-imp">
        <div class="m-imp-t">Gesellschaftliche Wirkung</div>
        <p id="mImp"></p>
      </div>
      <div class="m-ctx">
        <div class="m-ctx-t">Historischer Kontext</div>
        <p id="mCtx"></p>
      </div>
      <div class="m-body" id="mBody"></div>
      <div class="m-sc">
        <div class="m-sc-t">Score-AufschlÃ¼sselung</div>
        <div id="mRows"></div>
        <div class="m-tot"><span class="m-tot-l" id="mTotL">Gesamt</span><span class="m-tot-n" id="mTot"></span></div>
      </div>
    </div>
  </div>

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // DATA
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const GRP = [
      { id: 'europa', name: 'Europa', col: '#c8962a' },
      { id: 'ostasien', name: 'Ostasien', col: '#4a7fb5' },
      { id: 'nahost', name: 'Naher Osten / MENA', col: '#6faa55' },
      { id: 'suedasien', name: 'SÃ¼dasien', col: '#c05a4a' },
      { id: 'mesopo', name: 'Mesopotamien / Antike', col: '#c9853a' },
      { id: 'afrika', name: 'Afrika', col: '#4aab9a' },
      { id: 'amerika', name: 'Amerika', col: '#7a5ab5' },
    ];
    const GM = Object.fromEntries(GRP.map(g => [g.id, g]));

    // Fields: g=group, n=name, y=year, c=cat
    // Score A: reach(0-25)+dur(0-25)+mult(0-30)+qual(0-20) = 100
    // Score B: cbrk(0-40)+imm(0-30)+shk(0-30) = 100
    const INV = [
      // MESOPOTAMIEN
      {
        g: 'mesopo', n: 'Landwirtschaft', y: -10000, c: 'Infrastruktur', reach: 25, dur: 25, mult: 30, qual: 20, cbrk: 40, imm: 30, shk: 28, inv: 'FrÃ¼he Bauern', org: 'Naher Osten',
        dsc: 'Domestizierung von Pflanzen und Tieren im Fruchtbaren Halbmond â€“ fundamentalste Wende der Menschheitsgeschichte.',
        imp: 'ErmÃ¶glichte sesshaftes Leben, BevÃ¶lkerungswachstum, Arbeitsteilung und alle spÃ¤teren Zivilisationen. Ohne sie: keine StÃ¤dte, kein Staat.',
        ctx: 'Vor etwa 12.000 Jahren begannen JÃ¤ger und Sammler im Fruchtbaren Halbmond, WildgrÃ¤ser wie Emmer und Einkorn gezielt anzubauen. Dieser langsame Ãœbergang, oft als Neolithische Revolution bezeichnet, wurde durch das Ende der letzten Eiszeit begÃ¼nstigt und fÃ¼hrte zur ersten dauerhaften Sesshaftigkeit.'
      },
      {
        g: 'mesopo', n: 'BewÃ¤sserung / Kanalbau', y: -6000, c: 'Infrastruktur', reach: 19, dur: 20, mult: 18, qual: 16, cbrk: 28, imm: 26, shk: 18, inv: 'Sumerer', org: 'Irak',
        dsc: 'Ausgedehnte BewÃ¤sserungssysteme legten die Grundlage fÃ¼r stÃ¤dtische Zivilisation.',
        imp: 'ErmÃ¶glichte Ãœberschussproduktion, StÃ¤dtewachstum und Arbeitsteilung.',
        ctx: 'Im trockenen SÃ¼dmessopotamien war Ackerbau ohne kÃ¼nstliche BewÃ¤sserung unmÃ¶glich. Die Sumerer gruben komplexe Kanalsysteme, um das Wasser von Euphrat und Tigris auf die Felder zu leiten. Dies erforderte zentrale Planung und Verwaltung, was die Entstehung erster frÃ¼her Staatsstrukturen fÃ¶rderte.'
      },
      {
        g: 'mesopo', n: 'Rad', y: -3500, c: 'Infrastruktur', reach: 23, dur: 25, mult: 26, qual: 18, cbrk: 36, imm: 28, shk: 22, inv: 'Unbekannt', org: 'Mesopotamien / Sumer',
        dsc: 'Das Rad (~3500 v. Chr.) â€“ erst TÃ¶pferscheibe, dann Fahrzeugrad.',
        imp: 'Grundlage aller Fahrzeuge und rotierenden Mechanismen. Revolutionierte Transport und KriegsfÃ¼hrung.',
        ctx: 'Das Rad wurde zunÃ¤chst nicht fÃ¼r den Transport, sondern als TÃ¶pferscheibe erfunden. Erst Jahrhunderte spÃ¤ter montierten Menschen RÃ¤der an Achsen fÃ¼r Karren. Diese Innovation revolutionierte den Transport von GÃ¼tern und spÃ¤ter, mit dem Streitwagen, auch die KriegsfÃ¼hrung.'
      },
      {
        g: 'mesopo', n: 'Schrift (Keilschrift)', y: -3200, c: 'Kommunikation', reach: 23, dur: 25, mult: 29, qual: 18, cbrk: 40, imm: 24, shk: 30, inv: 'Sumerer', org: 'Irak (Uruk)',
        dsc: 'Sumerische Keilschrift (~3200 v. Chr.) â€“ Ã¤lteste bekannte Schrift.',
        imp: 'Ohne Schrift keine Wissenschaft, kein Recht, keine Geschichte. Grundlage aller Zivilisationen.',
        ctx: 'In den wachsenden TempelstÃ¤dten wie Uruk wurde die Verwaltung von GÃ¼tern zu komplex fÃ¼r das GedÃ¤chtnis. Priester entwickelten ein System aus Bildzeichen, die spÃ¤ter abstrahiert und mit einem Griffel in feuchten Ton gedrÃ¼ckt wurden â€“ die Geburtsstunde der Informationsspeicherung.'
      },
      {
        g: 'mesopo', n: 'Kalender', y: -3000, c: 'Mathematik', reach: 22, dur: 25, mult: 16, qual: 15, cbrk: 30, imm: 22, shk: 20, inv: 'Babylonische Astronomen', org: 'Irak',
        dsc: 'Mesopotamische Astronomen entwickelten prÃ¤zise Lunisolarkalender.',
        imp: 'ErmÃ¶glichte Landwirtschaftsplanung und koordiniertes gesellschaftliches Leben.',
        ctx: 'Um Aussaat und Ernte sowie religiÃ¶se Feste zu koordinieren, beobachteten babylonische Priester systematisch den Nachthimmel. Sie unterteilten das Jahr in 12 Mondmonate und fÃ¼gten Schaltmonate ein, um mit dem Sonnenjahr synchron zu bleiben â€“ eine Leistung, die tiefe mathematische Kenntnisse voraussetzte.'
      },
      {
        g: 'mesopo', n: 'Rechtssystem (Hammurabi)', y: -1754, c: 'Wirtschaft', reach: 18, dur: 24, mult: 20, qual: 16, cbrk: 32, imm: 22, shk: 26, inv: 'KÃ¶nig Hammurabi', org: 'Babylonien',
        dsc: 'Codex Hammurabi (~1754 v. Chr.) â€“ 282 Gesetze, erste kodifizierte Normen.',
        imp: 'Grundlage aller modernen Rechtssysteme. Prinzipien wie VerhÃ¤ltnismÃ¤ÃŸigkeit.',
        ctx: 'KÃ¶nig Hammurabi lieÃŸ seine Gesetze in eine massive Diorit-Stele meiÃŸeln und Ã¶ffentlich aufstellen. Damit etablierte er das Prinzip, dass Recht nicht willkÃ¼rlich, sondern festgeschrieben und fÃ¼r alle (theoretisch) einsehbar sein sollte. Es regelte alles von HandelsvertrÃ¤gen bis zum Familienrecht.'
      },
      // AFRIKA
      {
        g: 'afrika', n: 'Ackerbau (Afrika)', y: -5000, c: 'Infrastruktur', reach: 14, dur: 22, mult: 12, qual: 13, cbrk: 28, imm: 22, shk: 16, inv: 'Sahelzonen-Kulturen', org: 'Mali / Niger',
        dsc: 'Westafrikanische Kulturen domestizierten Hirse und Sorghum unabhÃ¤ngig.',
        imp: 'ErnÃ¤hrungsgrundlage fÃ¼r West- und Zentralafrika Ã¼ber Jahrtausende.',
        ctx: 'UnabhÃ¤ngig vom Vorderen Orient domestizierten Menschen in der Sahelzone WildgrÃ¤ser wie Perlhirse und Sorghum. Diese Pflanzen waren perfekt an das trockene Klima angepasst und ermÃ¶glichten das ErblÃ¼hen spÃ¤terer westafrikanischer GroÃŸreiche wie Mali und Songhai.'
      },
      {
        g: 'afrika', n: 'Mathematik (Ã„gypten)', y: -3000, c: 'Mathematik', reach: 18, dur: 20, mult: 18, qual: 13, cbrk: 28, imm: 18, shk: 18, inv: 'Ã„gyptische Schreiber', org: 'Ã„gypten',
        dsc: 'Ã„gyptische Geometrie und Bruchrechnung fÃ¼r Bau und Verwaltung.',
        imp: 'Grundlage des Pyramidenbaus. Beeinflusste griechische Mathematik maÃŸgeblich.',
        ctx: 'FÃ¼r die Verwaltung des Staates und monumentale Bauprojekte wie die Pyramiden benÃ¶tigten die Ã„gypter praktische Mathematik. Sie entwickelten komplexe Methoden zur FlÃ¤chenberechnung (Geometrie) und ein dezimales Zahlensystem, das spÃ¤ter von griechischen Gelehrten wie Thales und Pythagoras studiert wurde.'
      },
      {
        g: 'afrika', n: 'Medizin (Ã„gypten)', y: -2700, c: 'Medizin', reach: 15, dur: 18, mult: 14, qual: 14, cbrk: 26, imm: 20, shk: 18, inv: 'Imhotep u.a.', org: 'Ã„gypten',
        dsc: 'Papyri belegen chirurgische Eingriffe und Diagnosen (~2700 v. Chr.).',
        imp: 'Erste dokumentierte medizinische Texte. Beeinflusste griechische und islamische Medizin.',
        ctx: 'Ã„gyptische Ã„rzte waren im ganzen Mittelmeerraum berÃ¼hmt. Der Papyrus Edwin Smith beschreibt rationale, fast moderne Diagnosen und Behandlungen von Kopfverletzungen und KnochenbrÃ¼chen, weitgehend frei von Magie â€“ ein frÃ¼her Triumph der Beobachtung und Erfahrung.'
      },
      {
        g: 'afrika', n: 'Metallurgie (Eisen)', y: -1400, c: 'Physik & Technik', reach: 20, dur: 22, mult: 18, qual: 15, cbrk: 30, imm: 24, shk: 20, inv: 'Verschiedene Kulturen', org: 'Tansania, Nigeria',
        dsc: 'Subsaharisches Afrika entwickelte EisenverhÃ¼ttung unabhÃ¤ngig.',
        imp: 'Revolutionierte Werkzeuge, Waffen und Landwirtschaft weltweit.',
        ctx: 'In der Nok-Kultur (Nigeria) und im Gebiet der GroÃŸen Seen entwickelten Schmiede hochentwickelte HochÃ¶fen, um Eisen zu gewinnen â€“ mÃ¶glicherweise frÃ¼her oder unabhÃ¤ngig von Europa und dem Nahen Osten. Eisenwerkzeuge revolutionierten die Landwirtschaft und ermÃ¶glichten die Besiedlung dichter RegenwÃ¤lder.'
      },

      // OSTASIEN
      {
        g: 'ostasien', n: 'Seide', y: -3000, c: 'Wirtschaft', reach: 17, dur: 20, mult: 14, qual: 11, cbrk: 24, imm: 16, shk: 14, inv: 'Leizu (legendÃ¤r)', org: 'China',
        dsc: 'China entwickelte Seidenherstellung und begrÃ¼ndete die SeidenstraÃŸe.',
        imp: 'Globales Handelsnetz, Kulturaustausch zwischen Asien und Europa.',
        ctx: 'Die Legende besagt, dass Kaiserin Leizu die Seidengewinnung entdeckte, als ein Kokon in ihren Tee fiel. Jahrtausendelang hÃ¼tete China das Geheimnis der Seidenraupenzucht unter Todesstrafe, was Seide zum kostbarsten Handelsgut der Antike machte und die ersten globalen Handelsrouten schuf.'
      },
      {
        g: 'ostasien', n: 'Papier', y: -105, c: 'Kommunikation', reach: 25, dur: 25, mult: 27, qual: 17, cbrk: 36, imm: 20, shk: 22, inv: 'Cai Lun', org: 'China',
        dsc: 'Cai Lun entwickelte Papier aus Pflanzenfasern (105 n. Chr.).',
        imp: 'ErmÃ¶glichte massenhafte Wissensverbreitung via SeidenstraÃŸe.',
        ctx: 'Vor dem Papier schrieb man auf teure Seide oder schwere Bambusstreifen. Der Hofbeamte Cai Lun standardisierte 105 n. Chr. ein Verfahren, aus Maulbeerbast, Fischernetzen und Lumpen einen leichten, billigen Schreibstoff zu schÃ¶pfen. Dies revolutionierte die Verwaltung des riesigen Reiches.'
      },
      {
        g: 'ostasien', n: 'Porzellan', y: 620, c: 'Wirtschaft', reach: 15, dur: 17, mult: 10, qual: 9, cbrk: 18, imm: 14, shk: 12, inv: 'Unbekannt', org: 'China (Tang-Ã„ra)',
        dsc: 'Tang-Ã„ra China perfektionierte Porzellan als wichtigstes Exportgut.',
        imp: 'Weltweit begehrtes Handelsgut, beeinflusste europÃ¤ische Keramik.',
        ctx: 'Durch die Verfeinerung von Kaolin-Ton und extrem hohe Brenntemperaturen gelang chinesischen TÃ¶pfern die Herstellung von "weiÃŸem Gold" â€“ hartem, transluzentem Porzellan. Es war so begehrt, dass es in Europa noch Jahrhunderte spÃ¤ter als magisch galt, bis BÃ¶ttger das Geheimnis 1708 "nacherfand".'
      },
      {
        g: 'ostasien', n: 'SchieÃŸpulver', y: 850, c: 'Physik & Technik', reach: 22, dur: 18, mult: 16, qual: 10, cbrk: 36, imm: 26, shk: 28, inv: 'Taoistische Alchemisten', org: 'China',
        dsc: 'SchieÃŸpulver entdeckt im 9. Jh.',
        imp: 'VerÃ¤nderte KriegsfÃ¼hrung weltweit. Auch fÃ¼r Bergbau und Sprengstoff.',
        ctx: 'Taoistische MÃ¶nche suchten eigentlich nach einem Elixier der Unsterblichkeit, als sie Salpeter, Schwefel und Holzkohle mischten. Statt ewigem Leben fanden sie eine explosive Substanz, die zunÃ¤chst fÃ¼r Feuerwerk, bald aber fÃ¼r "Feuerlanzen" und primitive Bomben gegen die Mongolen eingesetzt wurde.'
      },
      {
        g: 'ostasien', n: 'Buchdruck (Holzblock)', y: 868, c: 'Kommunikation', reach: 17, dur: 20, mult: 20, qual: 14, cbrk: 30, imm: 18, shk: 16, inv: 'Bi Sheng u.a.', org: 'China',
        dsc: 'Holzblockdruck und bewegliche Letter Jahrhunderte vor Gutenberg.',
        imp: 'Verbreitete Wissen in China. VorlÃ¤ufer des europÃ¤ischen Buchdrucks.',
        ctx: 'Lange vor Gutenberg schnitzten chinesische Handwerker ganze Buchseiten in HolzblÃ¶cke. Das Diamant-Sutra (868 n. Chr.) ist das Ã¤lteste gedruckte Buch der Welt. SpÃ¤ter entwickelte Bi Sheng bewegliche Lettern aus Keramik, die sich jedoch aufgrund der tausenden chinesischen Schriftzeichen zunÃ¤chst nicht durchsetzten.'
      },
      {
        g: 'ostasien', n: 'Kompass', y: 1044, c: 'Physik & Technik', reach: 22, dur: 18, mult: 20, qual: 13, cbrk: 32, imm: 22, shk: 20, inv: 'Unbekannt', org: 'China',
        dsc: 'Magnetischer Kompass â€“ via arabische HÃ¤ndler nach Europa.',
        imp: 'ErmÃ¶glichte Hochseeschifffahrt, Entdeckungszeitalter und globalen Seehandel.',
        ctx: 'Chinesische Wahrsager nutzten "LÃ¶ffel" aus Magneteisenstein zunÃ¤chst fÃ¼r Feng Shui, nicht zur Navigation. Erst zur Song-Dynastie erkannte man den Nutzen fÃ¼r die Schifffahrt. Nadeln wurden magnetisiert und schwimmend gelagert â€“ der SchlÃ¼ssel zur offenen See.'
      },
      // NAHER OSTEN
      {
        g: 'nahost', n: 'Destillation', y: 800, c: 'Physik & Technik', reach: 18, dur: 20, mult: 16, qual: 12, cbrk: 28, imm: 18, shk: 16, inv: 'Jabir ibn Hayyan', org: 'Irak',
        dsc: 'Arabische Alchemisten perfektionierten die Destillation.',
        imp: 'Grundlage fÃ¼r Alkohol, ParfÃ¼m, Medikamente und organische Chemie.',
        ctx: 'Der Alchemist Jabir ibn Hayyan (Geber) verbesserte den Destillierkolben (Alembic), um Stoffe zu reinigen. Er suchte nach der Umwandlung von Metallen, legte aber die Basis fÃ¼r die moderne Chemie (Alkohol, SÃ¤uren), die ParfÃ¼mherstellung und die Pharmazie.'
      },
      {
        g: 'nahost', n: 'Algebra', y: 820, c: 'Mathematik', reach: 24, dur: 25, mult: 28, qual: 17, cbrk: 36, imm: 16, shk: 22, inv: 'Al-Khwarizmi', org: 'Irak/Bagdad',
        dsc: 'Al-Khwarizmi begrÃ¼ndete die Algebra als eigenstÃ¤ndige Disziplin.',
        imp: 'Ohne Algebra keine Physik, Ingenieurwesen oder Computerwissenschaft.',
        ctx: 'Im Haus der Weisheit in Bagdad schrieb Al-Khwarizmi sein Buch "al-Jabr". Er lÃ¶ste quadratische Gleichungen nicht nur geometrisch, sondern abstrakt. Sein Name (Latinisiert: Algoritmi) ist der Ursprung des Wortes "Algorithmus" â€“ die Basis der heutigen digitalen Welt.'
      },
      {
        g: 'nahost', n: 'Chirurgie (al-Zahrawi)', y: 1000, c: 'Medizin', reach: 19, dur: 22, mult: 18, qual: 18, cbrk: 28, imm: 24, shk: 18, inv: 'Al-Zahrawi', org: 'Spanien/CÃ³rdoba',
        dsc: 'Al-Zahrawis illustriertes Chirurgiewerk â€“ das erste seiner Art.',
        imp: 'Viele Instrumente noch heute in Gebrauch. Grundlage europÃ¤ischer Chirurgie.',
        ctx: 'Al-Zahrawi (Abulcasis) war der Hofarzt im Kalifat von CÃ³rdoba. Er erfand Ã¼ber 200 chirurgische Instrumente, darunter Skalpelle, KnochensÃ¤gen und Zangen, und beschrieb als Erster die Verwendung von resorbierbarem Catgut (DarmfÃ¤den) fÃ¼r innere NÃ¤hte â€“ eine Technik, die heute noch verwendet wird.'
      },
      {
        g: 'nahost', n: 'Kaffee', y: 1000, c: 'Wirtschaft', reach: 18, dur: 18, mult: 10, qual: 11, cbrk: 14, imm: 16, shk: 12, inv: 'Unbekannt', org: 'Ã„thiopien/Jemen',
        dsc: 'Arabische Kultur entdeckte und verbreitete Kaffee ab dem 10. Jh.',
        imp: 'Globale Industrie, KaffeehÃ¤user als intellektuelle Zentren.',
        ctx: 'Sufi-MÃ¶nche im Jemen nutzten den Sud aus Kaffeekirschen, um bei nÃ¤chtlichen Gebeten wach zu bleiben. Von dort verbreitete sich das GetrÃ¤nk Ã¼ber Mekka und Kairo in die Welt. KaffeehÃ¤user wurden zu Orten des intellektuellen Austauschs, die spÃ¤ter auch die europÃ¤ische AufklÃ¤rung befeuerten.'
      },
      {
        g: 'nahost', n: 'Optik (Ibn al-Haytham)', y: 1011, c: 'Physik & Technik', reach: 21, dur: 24, mult: 24, qual: 14, cbrk: 34, imm: 14, shk: 22, inv: 'Ibn al-Haytham', org: 'Ã„gypten/Irak',
        dsc: 'Ibn al-Haythams "Buch der Optik" begrÃ¼ndete die experimentelle Methode.',
        imp: 'Grundlage fÃ¼r Brillen, Teleskope, Mikroskope, Kameras.',
        ctx: 'WÃ¤hrend seines Hausarrests in Kairo bewies Ibn al-Haytham experimentell, dass Licht nicht vom Auge ausgeht (wie die Griechen dachten), sondern in das Auge fÃ¤llt. Er erforschte Linsen, Spiegel und die Camera Obscura und gilt durch seinen systematischen Ansatz als einer der ersten echten Wissenschaftler.'
      },

      // SÃœDASIEN
      {
        g: 'suedasien', n: 'Baumwolle (Textil)', y: -3000, c: 'Wirtschaft', reach: 20, dur: 22, mult: 12, qual: 14, cbrk: 20, imm: 18, shk: 12, inv: 'Indus-Zivilisation', org: 'Pakistan/Indien',
        dsc: 'Industal-Zivilisation kultivierte Baumwolle vor 5000 Jahren.',
        imp: 'Grundlage globaler Textilindustrie. PrÃ¤gend fÃ¼r frÃ¼he Industrialisierung.',
        ctx: 'WÃ¤hrend man anderswo Felle, Leinen oder Wolle trug, domestizierten Bauern im Industal die Baumwollpflanze. Sie entwickelten Spinn- und Webtechniken, die Stoffe hervorbrachten, welche die Griechen spÃ¤ter staunend als "Wolle, die auf BÃ¤umen wÃ¤chst" beschrieben.'
      },
      {
        g: 'suedasien', n: 'Medizin (Ayurveda)', y: -1500, c: 'Medizin', reach: 14, dur: 18, mult: 10, qual: 12, cbrk: 22, imm: 18, shk: 14, inv: 'Vedische Autoren', org: 'Indien',
        dsc: 'Vedische Texte beschreiben Ayurveda als umfassendes Medizinsystem.',
        imp: 'Beeinflusste frÃ¼hislamische Medizin; Yoga heute globale Gesundheitspraxis.',
        ctx: 'Ayurveda ("Wissen vom Leben") ist eines der Ã¤ltesten ganzheitlichen Medizinsysteme. Die Texte Charaka Samhita und Sushruta Samhita beschreiben schon frÃ¼h komplexe chirurgische Eingriffe (wie Nasenrekonstruktionen) und eine Lehre von den drei Doshas, die PrÃ¤vention Ã¼ber Heilung stellt.'
      },
      {
        g: 'suedasien', n: 'Dezimalsystem', y: 500, c: 'Mathematik', reach: 25, dur: 25, mult: 28, qual: 17, cbrk: 38, imm: 14, shk: 20, inv: 'Aryabhata u.a.', org: 'Indien',
        dsc: 'Indische Mathematiker entwickelten das Dezimalsystem mit Stellenwert.',
        imp: 'Ohne Dezimalsystem keine moderne Wissenschaft, Technik oder Wirtschaft.',
        ctx: 'Das geniale Konzept, dass der Wert einer Ziffer von ihrer Position abhÃ¤ngt (Einer, Zehner, Hunderter), entstand in Indien. Es vereinfachte Berechnungen dramatisch gegenÃ¼ber dem rÃ¶mischen System und gelangte Ã¼ber arabische Gelehrte nach Europa.'
      },
      {
        g: 'suedasien', n: 'Null', y: 628, c: 'Mathematik', reach: 25, dur: 25, mult: 30, qual: 18, cbrk: 40, imm: 12, shk: 24, inv: 'Brahmagupta', org: 'Indien',
        dsc: 'Brahmagupta definierte 628 n. Chr. die Null als vollwertige Zahl.',
        imp: 'Grundlage aller modernen Mathematik und des BinÃ¤rcodes.',
        ctx: 'Was fÃ¼r die Griechen ein "Nichts" und philosophisch undenkbar war, definierten indische Denker (Shunya) als mathematische GrÃ¶ÃŸe. Brahmagupta formulierte Rechenregeln fÃ¼r die Null ("Null minus Null ist Null"), was die abstrakte Mathematik und spÃ¤ter die binÃ¤re Logik von Computern ermÃ¶glichte.'
      },
      // EUROPA
      {
        g: 'europa', n: 'Druckerpresse', y: 1440, c: 'Kommunikation', reach: 22, dur: 24, mult: 28, qual: 16, cbrk: 34, imm: 20, shk: 28, inv: 'Johannes Gutenberg', org: 'Deutschland',
        dsc: 'Gutenbergs Druckerpresse (1440) ermÃ¶glichte Massenreproduktion von Texten.',
        imp: 'ErmÃ¶glichte Reformation, AufklÃ¤rung und wissenschaftliche Revolution.',
        ctx: 'Gutenberg kombinierte Weinpresse und bewegliche Lettern. Technisch waren ihm Koreaner (Jikji, 1377) und Chinesen voraus, doch Gutenbergs System der HandgieÃŸinstrumente fÃ¼r Lettern und die Ã¶lhaltige Tinte erlaubten erstmals eine *wirtschaftliche* Massenproduktion, die die Gesellschaftsstruktur Europas umwÃ¤lzte.'
      },
      {
        g: 'europa', n: 'Dampfmaschine', y: 1769, c: 'Physik & Technik', reach: 24, dur: 22, mult: 28, qual: 18, cbrk: 30, imm: 28, shk: 22, inv: 'James Watt', org: 'Schottland',
        dsc: 'Watts Dampfmaschine (1769) trieb die Industrielle Revolution an.',
        imp: 'Fabrikproduktion, Eisenbahn, Dampfschiff. VerÃ¤nderte Arbeit und globale Wirtschaft.',
        ctx: 'Thomas Newcomen baute 1712 die erste atmosphÃ¤rische Dampfmaschine fÃ¼r den Bergbau. Sie war jedoch enorm ineffizient. James Watts entscheidender Beitrag war der separate Kondensator, der den Energieverlust minimierte und die Maschine leistungsfÃ¤hig genug fÃ¼r den Antrieb von Fabriken machte.'
      },
      {
        g: 'europa', n: 'Eisenbahn', y: 1804, c: 'Infrastruktur', reach: 23, dur: 21, mult: 24, qual: 17, cbrk: 26, imm: 28, shk: 20, inv: 'Stephenson / Trevithick', org: 'England',
        dsc: 'Dampfeisenbahn verband Kontinente und ermÃ¶glichte Massentransport.',
        imp: 'Trieb Industrialisierung und globalen Handel voran. Verdichtete Raum und Zeit.',
        ctx: 'Richard Trevithick baute die erste Lokomotive, doch erst George Stephensons "Rocket" bewies die Wirtschaftlichkeit. Die Eisenbahn schuf Zeitzonen, nationalen Zusammenhalt und den modernen Tourismus. Sie machte Landtransport erstmals schneller als ein galoppierendes Pferd.'
      },
      {
        g: 'europa', n: 'Impfung', y: 1796, c: 'Medizin', reach: 25, dur: 25, mult: 22, qual: 20, cbrk: 36, imm: 26, shk: 28, inv: 'Edward Jenner', org: 'England',
        dsc: 'Jenners Kuhpockenimpfstoff (1796) begrÃ¼ndete die Immunologie.',
        imp: 'Rettete Hunderte Millionen Leben. Pocken ausgerottet. Grundlage aller Impfstoffe.',
        ctx: 'Das landlÃ¤ufige Wissen, dass Melkerinnen nicht an Pocken erkrankten, inspirierte Jenner. Er infizierte einen Jungen mit harmlosen Kuhpocken und bewies spÃ¤ter dessen ImmunitÃ¤t gegen die tÃ¶dlichen Menschenpocken. Der Begriff "Vakzination" (von vacca: Kuh) erinnert an diesen Ursprung.'
      },
      {
        g: 'europa', n: 'Telefon', y: 1876, c: 'Kommunikation', reach: 23, dur: 18, mult: 20, qual: 16, cbrk: 28, imm: 24, shk: 22, inv: 'Alexander Graham Bell', org: 'USA/Schottland',
        dsc: 'Bell erfand 1876 das Telefon â€“ instantane Sprachkommunikation.',
        imp: 'Grundlage des modernen Telekommunikationsnetzes.',
        ctx: 'Die Urheberschaft ist hochumstritten. Antonio Meucci entwickelte bereits 1854 ein "Teletrofono", konnte sich das Patent aber nicht leisten. Elisha Gray reichte sein Patent nur 2 Stunden nach Bell ein. Bell gewann den Rechtsstreit und ging als Erfinder in die Geschichte ein, obwohl die Grundidee bereits existierte.'
      },
      {
        g: 'europa', n: 'Automobil', y: 1885, c: 'Physik & Technik', reach: 23, dur: 20, mult: 18, qual: 17, cbrk: 22, imm: 20, shk: 16, inv: 'Karl Benz', org: 'Deutschland',
        dsc: 'Benz\'s Patent-Motorwagen (1885) war das erste praxistaugliche Benzinfahrzeug.',
        imp: 'Schuf globale MobilitÃ¤tswirtschaft. VerÃ¤nderte Stadtplanung und Gesellschaft.',
        ctx: 'WÃ¤hrend Daimler den Motor baute, konstruierte Karl Benz das erste integrierte Fahrzeug. Seine Frau Bertha bewies auf der ersten Fernfahrt (ohne sein Wissen), dass das "Ding" funktionierte â€“ inklusive Reparatur der Benzinleitung mit einer Hutnadel.'
      },
      {
        g: 'europa', n: 'RÃ¶ntgenstrahlen', y: 1895, c: 'Medizin', reach: 22, dur: 23, mult: 18, qual: 18, cbrk: 32, imm: 26, shk: 22, inv: 'Wilhelm RÃ¶ntgen', org: 'Deutschland',
        dsc: 'RÃ¶ntgen entdeckte 1895 die nach ihm benannten Strahlen.',
        imp: 'Revolutionierte Diagnostik. Grundlage fÃ¼r CT, MRT und bildgebende Medizin.',
        ctx: 'Beim Experimentieren mit KathodenstrahlrÃ¶hren bemerkte RÃ¶ntgen ein mysteriÃ¶ses Leuchten auf einem entfernten Schirm. Er nannte die unbekannte Strahlung "X-Strahlen". Das erste RÃ¶ntgenbild zeigte die Hand seiner Frau â€“ der erste schmerzfreie Blick in das Innere eines lebenden Menschen.'
      },
      {
        g: 'europa', n: 'RelativitÃ¤tstheorie', y: 1905, c: 'Physik & Technik', reach: 20, dur: 25, mult: 26, qual: 14, cbrk: 40, imm: 8, shk: 30, inv: 'Albert Einstein', org: 'Deutschland',
        dsc: 'Einstein vereinte Raum und Zeit, formulierte E=mcÂ².',
        imp: 'Grundlage fÃ¼r GPS, Kernenergie, Lasertechnologie und moderne Kosmologie.',
        ctx: 'Als Patentamt-Angestellter dachte Einstein darÃ¼ber nach, was passiert, wenn man neben einem Lichtstrahl herfliegt. Seine Theorie stÃ¼rzte das newtonsche Weltbild: Zeit ist nicht absolut, Masse ist Energie. Ohne die BerÃ¼cksichtigung der Zeitdilatation wÃ¼rde heutiges GPS pro Tag um 10 km falsch liegen.'
      },
      {
        g: 'europa', n: 'Fotografie', y: 1839, c: 'Kommunikation', reach: 23, dur: 22, mult: 25, qual: 16, cbrk: 30, imm: 20, shk: 18, inv: 'Daguerre / Talbot', org: 'Frankreich/UK',
        dsc: 'Daguerreotypie (1839) machte die Welt visuell konservierbar.',
        imp: 'Revolutionierte Kunst, Wissenschaft, Journalismus und das menschliche Erinnern.',
        ctx: 'Nach NiÃ©pces ersten Versuchen perfektionierte Daguerre das Verfahren mit versilberten Kupferplatten. Fast gleichzeitig entwickelte Talbot das Negativ-Positiv-Verfahren, das VervielfÃ¤ltigung ermÃ¶glichte. PlÃ¶tzlich konnte die RealitÃ¤t eingefroren und Ã¼ber Generationen bewahrt werden.'
      },
      {
        g: 'europa', n: 'AnÃ¤sthesie', y: 1846, c: 'Medizin', reach: 25, dur: 25, mult: 18, qual: 20, cbrk: 34, imm: 30, shk: 24, inv: 'Morton / Wells', org: 'USA',
        dsc: 'Erste Ã¶ffentliche Ã„ther-Narkose (1846).',
        imp: 'ErmÃ¶glichte schmerzfreie Operationen und damit moderne Chirurgie. Einer der grÃ¶ÃŸten humanitÃ¤ren Fortschritte.',
        ctx: 'Vor 1846 bedeutete Chirurgie Qual und Schock. Der Zahnarzt William Morton demonstrierte im "Ether Dome" in Boston Ã¶ffentlich die Wirkung von Diethylether. Der Patient erwachte und sagte: "Gentlemen, this is no humbug." Damit endete das Zeitalter der Schmerzen im OP.'
      },
      {
        g: 'europa', n: 'Stromnetz / GlÃ¼hbirne', y: 1879, c: 'Infrastruktur', reach: 25, dur: 25, mult: 30, qual: 20, cbrk: 32, imm: 28, shk: 26, inv: 'Edison u.a.', org: 'USA (System)',
        dsc: 'Edison entwickelte 1879 die kommerzielle GlÃ¼hbirne und Verteilungssysteme.',
        imp: 'VerlÃ¤ngerte den Arbeitstag, Grundlage aller elektrischen GerÃ¤te und modernen Industrie.',
        ctx: 'Die GlÃ¼hbirne hatte viele VÃ¤ter (u.a. Swan, GÃ¶bel), doch sie waren kurzlebig. Edison kaufte Patente auf, verbesserte den GlÃ¼hfaden und â€“ entscheidend â€“ schuf das kommerzielle System aus Stromnetz und Kraftwerken. Er war weniger der alleinige Erfinder als der Unternehmer, der das Licht marktfÃ¤hig machte.'
      },
      {
        g: 'europa', n: 'Kernspaltung', y: 1938, c: 'Physik & Technik', reach: 24, dur: 22, mult: 25, qual: 10, cbrk: 40, imm: 14, shk: 30, inv: 'Hahn / Meitner', org: 'Deutschland',
        dsc: 'Hahn und Meitner entdeckten 1938 die Spaltbarkeit von Uranatomen.',
        imp: 'FÃ¼hrte zur Atombombe (geopolitische Ordnung) und Kernenergie (CO2-arme Energie).',
        ctx: 'Otto Hahn bestrahlte Uran mit Neutronen und fand Ã¼berraschend Barium. Lise Meitner, im schwedischen Exil, lieferte die physikalische ErklÃ¤rung: Der Atomkern war zerplatzt und hatte gewaltige Energie freigesetzt (E=mcÂ²). Eine Entdeckung an der Schwelle zum Zweiten Weltkrieg, die die Geopolitik fÃ¼r immer verÃ¤nderte.'
      },
      {
        g: 'europa', n: 'Penicillin', y: 1928, c: 'Medizin', reach: 24, dur: 23, mult: 20, qual: 20, cbrk: 28, imm: 26, shk: 20, inv: 'Alexander Fleming', org: 'Schottland',
        dsc: 'Flemings Penicillin-Entdeckung (1928) begrÃ¼ndete die Antibiotika-Ã„ra.',
        imp: 'Machte tÃ¶dliche Infektionen heilbar. Rettete Ã¼ber 200 Mio. Menschen.',
        ctx: 'Ein glÃ¼cklicher Zufall: Fleming vergaÃŸ eine Petrischale mit Bakterien, auf der ein Schimmelpilz wuchs, der die Bakterien tÃ¶tete. Es dauerte Jahre, bis Florey und Chain den Wirkstoff isolieren und massenhaft produzieren konnten â€“ gerade rechtzeitig, um im Zweiten Weltkrieg Millionen Soldaten das Leben zu retten.'
      },
      {
        g: 'europa', n: 'World Wide Web', y: 1991, c: 'Kommunikation', reach: 25, dur: 22, mult: 29, qual: 20, cbrk: 22, imm: 24, shk: 18, inv: 'Tim Berners-Lee', org: 'CERN, Schweiz',
        dsc: 'Berners-Lee erfand 1991 das Web als universelles Informationssystem.',
        imp: 'VerÃ¤nderte Kommunikation, Wirtschaft, Wissenschaft und Kultur weltweit.',
        ctx: 'Berners-Lee wollte eigentlich nur das Informationschaos am CERN ordnen. Er kombinierte Hypertext mit dem Internet. Seine wichtigste Entscheidung: Er patentierte das WWW nicht, sondern schenkte es der Welt, was dessen explosionsartige Verbreitung und die Demokratisierung von Wissen erst ermÃ¶glichte.'
      },

      // AMERIKA
      {
        g: 'amerika', n: 'Mais (Domestikation)', y: -7000, c: 'Wirtschaft', reach: 22, dur: 25, mult: 14, qual: 16, cbrk: 26, imm: 22, shk: 14, inv: 'Mesoamerikanische Bauern', org: 'Mexiko',
        dsc: 'Mesoamerikanische Kulturen domestizierten Mais (~7000 v. Chr.).',
        imp: 'Nach 1492 globale Verbreitung. Eine der drei meistproduzierten Kulturpflanzen.',
        ctx: 'Aus dem unscheinbaren Wildgras Teosinte zÃ¼chteten Bauern in Mexiko Ã¼ber Jahrtausende den Mais. Diese genetische Meisterleistung bildete die ErnÃ¤hrungsgrundlage der Maya und Azteken und ist heute, ob als Nahrung oder Biosprit, die meistangebaute Pflanze der Welt.'
      },
      {
        g: 'amerika', n: 'Flugzeug', y: 1903, c: 'Infrastruktur', reach: 24, dur: 22, mult: 20, qual: 18, cbrk: 30, imm: 22, shk: 26, inv: 'Wright Brothers', org: 'USA',
        dsc: 'Die Wright-BrÃ¼der realisierten 1903 den ersten kontrollierten Motorflug.',
        imp: 'Schuf globalen Luftverkehr, verÃ¤nderte Krieg, Handel und Tourismus.',
        ctx: 'Orville und Wilbur Wright, Fahrradmechaniker aus Ohio, lÃ¶sten das Problem des kontrollierten Fluges nicht mit stÃ¤rkeren Motoren, sondern durch Aerodynamik (FlÃ¼gelverwindung). Ihr erster Flug in Kitty Hawk dauerte nur 12 Sekunden, befreite den Menschen aber von der Erdgebundenheit.'
      },
      {
        g: 'amerika', n: 'Mikrochip / Computer', y: 1947, c: 'Physik & Technik', reach: 25, dur: 23, mult: 30, qual: 20, cbrk: 26, imm: 16, shk: 20, inv: 'Bell Labs / Von Neumann', org: 'USA',
        dsc: 'Transistor (1947) und Mikroprozessor â€“ Grundlage der digitalen Revolution.',
        imp: 'Ohne Computer kein Internet, keine Raumfahrt, keine moderne Medizin.',
        ctx: 'WÃ¤hrend die USA (ENIAC) und UK (Colossus) oft im Fokus stehen, baute Konrad Zuse in Berlin bereits 1941 den Z3 â€“ den ersten funktionierenden, programmierbaren Computer der Welt. Die spÃ¤tere Erfindung des Transistors in den Bell Labs und die Von-Neumann-Architektur machten Computer jedoch erst skalierbar.'
      },
      {
        g: 'amerika', n: 'DNA-Struktur', y: 1953, c: 'Medizin', reach: 22, dur: 25, mult: 26, qual: 19, cbrk: 38, imm: 10, shk: 28, inv: 'Watson, Crick, Franklin', org: 'UK/USA',
        dsc: 'Entdeckung der Doppelhelix (1953) revolutionierte Biologie und Medizin.',
        imp: 'Grundlage fÃ¼r Genetik, Gentherapie, Forensik, Biotechnologie und mRNA-Impfstoffe.',
        ctx: 'Basierend auf den entscheidenden RÃ¶ntgenbildern von Rosalind Franklin entschlÃ¼sselten Watson und Crick die Struktur des Lebens. Die Erkenntnis, dass DNA Informationen in einem 4-Buchstaben-Code speichert, machte Biologie zu einer Informationswissenschaft.'
      },
      {
        g: 'amerika', n: 'Internet (ARPANET)', y: 1969, c: 'Kommunikation', reach: 25, dur: 23, mult: 30, qual: 20, cbrk: 24, imm: 14, shk: 18, inv: 'DARPA / UCLA', org: 'USA',
        dsc: 'ARPANET (1969) â€“ technische Grundlage der digitalen Vernetzung.',
        imp: 'Grundlage des Internets. VerÃ¤nderte Kommunikation und Wirtschaft global.',
        ctx: 'Mitten im Kalten Krieg suchte das US-MilitÃ¤r nach einem dezentralen Netzwerk, das auch bei Ausfall einzelner Knoten funktioniert. Die erste Nachricht "LO" (eigentlich "LOGIN", aber das System stÃ¼rzte ab) zwischen zwei Unis in Kalifornien war der unauffÃ¤llige Startschuss fÃ¼r das globale Netz.'
      },
      {
        g: 'amerika', n: 'Raumfahrt / GPS', y: 1969, c: 'Physik & Technik', reach: 21, dur: 20, mult: 20, qual: 16, cbrk: 28, imm: 22, shk: 24, inv: 'NASA', org: 'USA',
        dsc: 'Apollo-Programm (1969) â€“ Menschen auf dem Mond.',
        imp: 'GPS, Kommunikationssatelliten, neue Materialien aus der Raumfahrtforschung.',
        ctx: 'Der "Sputnik-Schock" lÃ¶ste ein technologisches WettrÃ¼sten aus, das 1969 in der Mondlandung gipfelte. Neben dem Prestige brachte die Raumfahrt praktische Nebenprodukte: Satellitennavigation (GPS), Wettersatelliten und weltweite TV-Ãœbertragungen.'
      },
      {
        g: 'amerika', n: 'Smartphone', y: 2007, c: 'Kommunikation', reach: 25, dur: 20, mult: 28, qual: 19, cbrk: 18, imm: 28, shk: 22, inv: 'Apple (Jobs) u.a.', org: 'USA',
        dsc: 'iPhone (2007) vereinte Telefon, Computer und Internet in der Hosentasche.',
        imp: 'VerÃ¤nderte sozialen Umgang, Wirtschaft und Informationszugang fÃ¼r Milliarden Menschen.',
        ctx: 'Steve Jobs prÃ¤sentierte 2007 drei GerÃ¤te in einem: "A widescreen iPod, a revolutionary mobile phone, and a breakthrough internet communicator." Durch die EinfÃ¼hrung des App Stores wurde das Smartphone zum universellen Werkzeug fÃ¼r fast jede menschliche TÃ¤tigkeit.'
      },
      {
        g: 'amerika', n: 'KÃ¼nstliche Intelligenz', y: 2022, c: 'Physik & Technik', reach: 25, dur: 25, mult: 30, qual: 15, cbrk: 30, imm: 30, shk: 28, inv: 'OpenAI / Google u.a.', org: 'USA/Global',
        dsc: 'Durchbruch generativer KI (ChatGPT u.a.) markiert Beginn des KI-Zeitalters.',
        imp: 'Potenzial, jede Wissensarbeit, Forschung und KreativitÃ¤t fundamental zu verÃ¤ndern. Auswirkungen noch offen.',
        ctx: 'Jahrzehntelang war KI ein akademisches Nischenfeld. Durch die Kombination von riesigen Datenmengen und massiver Rechenkraft lernten neuronale Netze (Transformer-Modelle) plÃ¶tzlich, menschliche Sprache zu verstehen und zu generieren. Dies markiert den Ãœbergang von Werkzeugen, die Befehle ausfÃ¼hren, zu Werkzeugen, die mitdenken.'
      },
    ];

    const NOBEL = [
      // PHYSIK
      {
        g: 'europa', n: 'RÃ¶ntgenstrahlung', y: 1901, c: 'Physik', reach: 25, dur: 25, mult: 30, qual: 20, cbrk: 40, imm: 28, shk: 25, inv: 'Wilhelm RÃ¶ntgen', org: 'Deutschland',
        dsc: 'Entdeckung der X-Strahlen revolutionierte die medizinische Diagnostik.',
        imp: 'ErmÃ¶glichte den ersten schmerzfreien Blick in den KÃ¶rper. Grundlage fÃ¼r CT, MaterialprÃ¼fung und DNA-Analyse.',
        ctx: 'Der allererste Nobelpreis fÃ¼r Physik. RÃ¶ntgen verzichtete bewusst auf ein Patent, damit die Menschheit maximalen Nutzen daraus ziehen konnte.'
      },
      {
        g: 'europa', n: 'RadioaktivitÃ¤t', y: 1903, c: 'Physik', reach: 22, dur: 25, mult: 30, qual: 10, cbrk: 40, imm: 15, shk: 28, inv: 'Becquerel, P. & M. Curie', org: 'Frankreich/Polen',
        dsc: 'Entdeckung der spontanen RadioaktivitÃ¤t und neuer Elemente.',
        imp: 'Grundlage der Kernphysik, Krebstherapie und modernen Energieerzeugung.',
        ctx: 'Marie Curie prÃ¤gte den Begriff "RadioaktivitÃ¤t". Ihre Arbeit unter primitivsten Bedingungen ohne SchutzmaÃŸnahmen kostete sie letztlich die Gesundheit, Ã¶ffnete aber das Tor zum VerstÃ¤ndnis des Atomkerns.'
      },
      {
        g: 'europa', n: 'Quantentheorie', y: 1918, c: 'Physik', reach: 25, dur: 25, mult: 30, qual: 15, cbrk: 40, imm: 10, shk: 30, inv: 'Max Planck', org: 'Deutschland',
        dsc: 'Entdeckung der Energiequanten verÃ¤nderte das physikalische Weltbild fundamental.',
        imp: 'Grundlage aller modernen Elektronik, Laser, Computerchips und MRT.',
        ctx: 'Gegen die klassische Physik fÃ¼hrte Planck die Idee ein, dass Energie nicht kontinuierlich, sondern in Paketen (Quanten) abgegeben wird â€“ eine Verzweiflungstat, um Messdaten zu erklÃ¤ren, die zur Geburt der modernen Physik fÃ¼hrte.'
      },
      {
        g: 'europa', n: 'RelativitÃ¤tstheorie', y: 1921, c: 'Physik', reach: 25, dur: 25, mult: 28, qual: 15, cbrk: 40, imm: 8, shk: 30, inv: 'Albert Einstein', org: 'Deutschland/Schweiz',
        dsc: 'FÃ¼r den photoelektrischen Effekt (und implizit RelativitÃ¤t).',
        imp: 'Grundlage fÃ¼r GPS, Solarzellen, Laser und unser VerstÃ¤ndnis von Raum und Zeit.',
        ctx: 'Obwohl Einstein fÃ¼r den Photoeffekt (Licht als Teilchen) geehrt wurde, ist sein Name untrennbar mit der RelativitÃ¤tstheorie verbunden, die unser VerstÃ¤ndnis des Universums revolutionierte.'
      },
      {
        g: 'amerika', n: 'Transistor', y: 1956, c: 'Physik', reach: 25, dur: 25, mult: 30, qual: 20, cbrk: 35, imm: 25, shk: 20, inv: 'Shockley, Bardeen, Brattain', org: 'USA',
        dsc: 'Erfindung des Transistors, des Bausteins aller modernen Elektronik.',
        imp: 'Grundlage des Informationszeitalters: Computer, Internet, Smartphones.',
        ctx: 'Der Ersatz klobiger VakuumrÃ¶hren durch winzige Halbleiter ermÃ¶glichte die Miniaturisierung der Elektronik. John Bardeen ist der einzige Mensch, der den Physik-Nobelpreis zweimal erhielt (spÃ¤ter fÃ¼r Supraleitung).'
      },

      // CHEMIE
      {
        g: 'europa', n: 'Haber-Bosch-Verfahren', y: 1918, c: 'Chemie', reach: 25, dur: 25, mult: 25, qual: 20, cbrk: 30, imm: 25, shk: 25, inv: 'Fritz Haber', org: 'Deutschland',
        dsc: 'Synthese von Ammoniak aus Luftstickstoff fÃ¼r DÃ¼ngemittel.',
        imp: 'ErmÃ¤hrt heute ca. 50% der WeltbevÃ¶lkerung. Ohne dies gÃ¤be es weltweite HungersnÃ¶te.',
        ctx: 'Eine januskÃ¶pfige Erfindung: Sie ermÃ¶glichte KunstdÃ¼nger und sattte Milliarden, lieferte aber auch den Sprengstoff fÃ¼r zwei Weltkriege. Haber selbst gilt als Vater des Gaskriegs.'
      },
      {
        g: 'europa', n: 'Penicillin', y: 1945, c: 'Medizin', reach: 25, dur: 25, mult: 25, qual: 25, cbrk: 35, imm: 30, shk: 20, inv: 'Fleming, Chain, Florey', org: 'UK',
        dsc: 'Entdeckung und Isolierung des ersten Antibiotikums.',
        imp: 'Kampf gegen bakterielle Infektionen. ErhÃ¶hte Lebenserwartung weltweit massiv.',
        ctx: 'Flemings Zufallsfund 1928 blieb lange unbeachtet, bis Florey und Chain unter dem Druck des 2. Weltkriegs die industrielle Herstellung entwickelten und Millionen Soldaten retteten.'
      },
      {
        g: 'europa', n: 'DNA-Struktur', y: 1962, c: 'Medizin', reach: 22, dur: 25, mult: 30, qual: 20, cbrk: 38, imm: 15, shk: 25, inv: 'Crick, Watson, Wilkins', org: 'UK/USA',
        dsc: 'EntschlÃ¼sselung der Molekularstruktur der NukleinsÃ¤uren.',
        imp: 'SchlÃ¼ssel zum VerstÃ¤ndnis des Lebens, Vererbung und moderner Biotechnologie.',
        ctx: 'Die Entdeckung der Doppelhelix basiert maÃŸgeblich auf den Daten von Rosalind Franklin, die vor der Preisverleihung starb und leer ausging.'
      },
      {
        g: 'europa', n: 'CRISPR/Cas9', y: 2020, c: 'Chemie', reach: 20, dur: 25, mult: 30, qual: 20, cbrk: 35, imm: 20, shk: 28, inv: 'Charpentier, Doudna', org: 'Frankreich/USA',
        dsc: 'Die "Genschere" zur gezielten VerÃ¤nderung von Erbgut.',
        imp: 'Revolutioniert Medizin (Gentherapie) und Landwirtschaft. Potenzial zur Heilung von Erbkrankheiten.',
        ctx: 'Ein bakterieller Abwehrmechanismus gegen Viren wurde zum prÃ¤zisesten Werkzeug der Gentechnik umgebaut. Erlaubt "Editing" des Codes des Lebens.'
      },

      // MEDIZIN
      {
        g: 'europa', n: 'Insulin', y: 1923, c: 'Medizin', reach: 22, dur: 25, mult: 15, qual: 25, cbrk: 30, imm: 30, shk: 15, inv: 'Banting, Macleod', org: 'Kanada/Schottland',
        dsc: 'Entdeckung des Insulins zur Behandlung von Diabetes.',
        imp: 'Rettete Millionen Diabetikern das Leben, die zuvor dem Tod geweiht waren.',
        ctx: 'Banting verkaufte das Patent fÃ¼r 1 Dollar an die UniversitÃ¤t Toronto ("Insulin gehÃ¶rt der Welt, nicht mir"), um die VerfÃ¼gbarkeit fÃ¼r alle Patienten zu sichern.'
      },
      {
        g: 'ostasien', n: 'Artemisinin', y: 2015, c: 'Medizin', reach: 20, dur: 20, mult: 15, qual: 25, cbrk: 25, imm: 28, shk: 10, inv: 'Tu Youyou', org: 'China',
        dsc: 'Neuartige Therapie gegen Malaria basierend auf traditioneller chinesischer Medizin.',
        imp: 'Rettete Millionen Menschenleben in EntwicklungslÃ¤ndern, besonders Kinder.',
        ctx: 'Tu Youyou durchforstete uralte Texte der TCM und fand in 1600 Jahre alten Schriften Hinweise auf EinjÃ¤hriger BeifuÃŸ (Artemisia annua), extrahierte den Wirkstoff kalt und testete ihn an sich selbst.'
      },
      {
        g: 'europa', n: 'IVF', y: 2010, c: 'Medizin', reach: 18, dur: 25, mult: 20, qual: 25, cbrk: 35, imm: 20, shk: 25, inv: 'Robert G. Edwards', org: 'UK',
        dsc: 'Entwicklung der In-vitro-Fertilisation (kÃ¼nstliche Befruchtung).',
        imp: 'ErmÃ¶glichte Millionen ungewollt kinderlosen Paaren die FamiliengrÃ¼ndung.',
        ctx: 'Louise Brown, das erste "Retortenbaby", wurde 1978 geboren. Was damals als ethisch hochumstritten galt und als "Frankenstein-Forschung" beschimpft wurde, ist heute medizinischer Standard.'
      },

      // FRIEDEN
      {
        g: 'europa', n: 'Rotes Kreuz', y: 1901, c: 'Frieden', reach: 25, dur: 25, mult: 25, qual: 25, cbrk: 35, imm: 25, shk: 20, inv: 'Henry Dunant', org: 'Schweiz',
        dsc: 'GrÃ¼ndung des Internationalen Komitees vom Roten Kreuz.',
        imp: 'Etablierte HumanitÃ¤t im Krieg und die Genfer Konventionen.',
        ctx: 'Nachdem Dunant das Leid der Schlacht von Solferino sah, initiierte er eine neutrale Hilfsorganisation. Er teilte sich den allerersten Friedensnobelpreis mit FrÃ©dÃ©ric Passy.'
      },
      {
        g: 'amerika', n: 'GrÃ¼ne Revolution', y: 1970, c: 'Frieden', reach: 25, dur: 22, mult: 25, qual: 25, cbrk: 30, imm: 30, shk: 20, inv: 'Norman Borlaug', org: 'USA',
        dsc: 'Entwicklung von Hochertragsweizen, der Milliarden vor Hunger bewahrte.',
        imp: 'Rettete schÃ¤tzungsweise Ã¼ber eine Milliarde Menschenleben vor dem Hungertod.',
        ctx: 'Borlaug zÃ¼chtete in Mexiko krankheitsresistente, kurzhalmige Weizensorten. Seine Arbeit widerlegte die dÃ¼steren Prognosen, dass das BevÃ¶lkerungswachstum zwangslÃ¤ufig zu globalen HungersnÃ¶ten fÃ¼hren wÃ¼rde.'
      },
      {
        g: 'afrika', n: 'Anti-Apartheid', y: 1993, c: 'Frieden', reach: 18, dur: 20, mult: 25, qual: 20, cbrk: 30, imm: 20, shk: 28, inv: 'Mandela, de Klerk', org: 'SÃ¼dafrika',
        dsc: 'Friedlicher Ãœbergang vom Apartheid-Regime zur Demokratie.',
        imp: 'Verhinderte einen BÃ¼rgerkrieg und setzte ein globales Zeichen fÃ¼r VersÃ¶hnung.',
        ctx: 'Mandela, nach 27 Jahren Haft, reichte seinen UnterdrÃ¼ckern die Hand. Ein seltenes Beispiel fÃ¼r einen nahezu gewaltfreien Machtwechsel in einem tief gespaltenen Land.'
      },
      {
        g: 'suedasien', n: 'Mikrokredite', y: 2006, c: 'Frieden', reach: 20, dur: 20, mult: 25, qual: 20, cbrk: 30, imm: 20, shk: 15, inv: 'Muhammad Yunus', org: 'Bangladesch',
        dsc: 'Grameen Bank und das Konzept der Mikrokredite fÃ¼r Arme.',
        imp: 'Wirtschaftliche Selbstbestimmung fÃ¼r Millionen, besonders Frauen.',
        ctx: 'Yunus bewies, dass die Ã„rmsten der Armen kreditwÃ¼rdig sind. Mit Kleinstkrediten ohne Sicherheiten half er Millionen, aus der absoluten Armut zu entfliehen.'
      },
      {
        g: 'nahost', n: 'Menschenrechte Iran', y: 2023, c: 'Frieden', reach: 18, dur: 15, mult: 25, qual: 15, cbrk: 20, imm: 15, shk: 25, inv: 'Narges Mohammadi', org: 'Iran',
        dsc: 'Kampf gegen die UnterdrÃ¼ckung der Frauen im Iran.',
        imp: 'Starkes Symbol fÃ¼r die "Frau, Leben, Freiheit"-Bewegung.',
        ctx: 'Aus dem GefÃ¤ngnis heraus kÃ¤mpft Mohammadi weiter fÃ¼r Frauenrechte und gegen die Todesstrafe, stellvertretend fÃ¼r die mutigen Proteste im Iran.'
      },

      // LITERATUR (mit gesellschaftlichem Impact)
      {
        g: 'suedasien', n: 'BrÃ¼ckenbauer', y: 1913, c: 'Literatur', reach: 15, dur: 20, mult: 20, qual: 15, cbrk: 20, imm: 10, shk: 15, inv: 'Rabindranath Tagore', org: 'Indien',
        dsc: 'Erster nicht-europÃ¤ischer LiteraturnobelpreistrÃ¤ger.',
        imp: 'Kulturelle BrÃ¼cke zwischen Ost und West, Stimme des Humanismus.',
        ctx: 'Tagore war nicht nur Dichter, sondern Sozialreformer, der den Nationalismus ablehnte und Bildung fÃ¶rderte. Seine Lyrik ("Gitanjali") berÃ¼hrte Menschen weltweit.'
      },
      {
        g: 'amerika', n: 'Stimme der Afroamerikaner', y: 1993, c: 'Literatur', reach: 18, dur: 20, mult: 20, qual: 15, cbrk: 25, imm: 15, shk: 20, inv: 'Toni Morrison', org: 'USA',
        dsc: 'Kraftvolle Romane Ã¼ber die afroamerikanische Erfahrung.',
        imp: 'VerÃ¤nderte den literarischen Kanon und das VerstÃ¤ndnis von Rassismus und IdentitÃ¤t.',
        ctx: 'Mit Werken wie "Beloved" gab sie den Vergessenen der Geschichte eine Stimme und thematisierte das Trauma der Sklaverei in einer neuen, eindringlichen Sprache.'
      }
    ];

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // STATE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    let DATASET = 'inv'; // 'inv' or 'nobel'
    let VIEW = 'grouped';
    let CATS = new Set(['all']);
    let SORT = 'score';
    let MINSC = 0;

    const DATASETS = {
      inv: {
        data: INV,
        lbl: 'Erfindungen',
        cats: ['Medizin', 'Physik & Technik', 'Mathematik', 'Kommunikation', 'Wirtschaft', 'Infrastruktur'],
        chips: [
          { id: 'Medizin', l: 'ğŸ¥ Medizin' },
          { id: 'Physik & Technik', l: 'âš™ï¸ Physik & Technik' },
          { id: 'Mathematik', l: 'ğŸ”¢ Mathematik' },
          { id: 'Kommunikation', l: 'ğŸ“¡ Kommunikation' },
          { id: 'Wirtschaft', l: 'ğŸ’° Wirtschaft' },
          { id: 'Infrastruktur', l: 'ğŸ—ï¸ Infrastruktur' }
        ],
        scoreA_lbl: 'Gesellschaftlicher Nutzen',
        scoreB_lbl: 'RevolutionÃ¤r',
        meth: {
          A: [
            { t: 'ğŸŒ Reichweite', d: 'Lokal bis Global', max: 25 },
            { t: 'â³ Dauerhaftigkeit', d: 'Jahrzehnte bis Jahrtausende', max: 25 },
            { t: 'ğŸ”— Multiplikator', d: 'Folgeinnovationen', max: 30 },
            { t: 'ğŸ¥ LebensqualitÃ¤t', d: 'Verbesserung des Alltags', max: 20 }
          ],
          B: [
            { t: 'ğŸ§  Konzeptbruch', d: 'Ãœberraschungseffekt', max: 40 },
            { t: 'âš¡ Sofortwirkung', d: 'Schnelligkeit der Adaption', max: 30 },
            { t: 'ğŸŒ Gesellschafts-Schock', d: 'VerÃ¤nderung der Ordnung', max: 30 }
          ]
        }
      },
      nobel: {
        data: NOBEL,
        lbl: 'Nobelpreise',
        cats: ['Physik', 'Chemie', 'Medizin', 'Frieden', 'Literatur', 'Wirtschaft'],
        chips: [
          { id: 'Physik', l: 'âš›ï¸ Physik' },
          { id: 'Chemie', l: 'ğŸ§ª Chemie' },
          { id: 'Medizin', l: 'âš•ï¸ Medizin' },
          { id: 'Frieden', l: 'ğŸ•Šï¸ Frieden' },
          { id: 'Literatur', l: 'ğŸ“– Literatur' },
          { id: 'Wirtschaft', l: 'ğŸ“ˆ Wirtschaft' }
        ],
        scoreA_lbl: 'Positiver Impact',
        scoreB_lbl: 'Disruptions-Faktor',
        meth: {
          A: [
            { t: 'ğŸŒ Reichweite', d: 'Millionen bis Milliarden Menschen', max: 25 },
            { t: 'â³ Nachhaltigkeit', d: 'Kurzfristig bis Dauerhaft', max: 25 },
            { t: 'ğŸ”— Wissenssprung', d: 'Fundament neuer Forschung', max: 30 },
            { t: 'â¤ï¸ HumanitÃ¤rer Wert', d: 'Leidminderung / Wohlstand', max: 20 }
          ],
          B: [
            { t: 'ğŸ§  Paradigmenwechsel', d: 'Neues Denken etabliert', max: 40 },
            { t: 'âš¡ Dringlichkeit', d: 'LÃ¶ste akutes Problem', max: 30 },
            { t: 'ğŸŒ Politischer Einfluss', d: 'VerÃ¤nderte Gesellschaft', max: 30 }
          ]
        }
      }
    };

    const scoreA = i => i.reach + i.dur + i.mult + i.qual;
    const scoreB = i => i.cbrk + i.imm + i.shk;
    const calcScore = i => VIEW === 'revolution' ? scoreB(i) : scoreA(i);

    // Dynamic Filter based on Current Dataset
    const getDatasetData = () => DATASETS[DATASET].data;

    const getFilteredItems = gid => getDatasetData()
      .filter(i => i.g === gid && calcScore(i) >= MINSC && (CATS.has('all') || CATS.has(i.c)))
      .sort((a, b) => a.y - b.y);

    const gTot = gid => getFilteredItems(gid).reduce((s, i) => s + calcScore(i), 0);
    const maxTot = () => Math.max(1, Math.max(...GRP.map(g => gTot(g.id))));
    const fmtY = y => y < 0 ? `${Math.abs(y)} v. Chr.` : `${y} n. Chr.`;

    function updateCategoryChips() {
      const cCont = document.getElementById('chips');
      const conf = DATASETS[DATASET];
      cCont.innerHTML = `<button class="ch ${CATS.has('all') ? 'on' : ''}" data-c="all">Alle</button>` +
        conf.chips.map(c => `<button class="ch ${CATS.has(c.id) ? 'on' : ''}" data-c="${c.id}">${c.l}</button>`).join('');
    }

    function updateMethodology() {
      const d = DATASETS[DATASET].meth;
      const mA = d.A.map(m => `
        <div class="meth-dim">
          <div class="meth-dim-t">${m.t} (max ${m.max})</div>
          <p>${m.d}</p>
        </div>
      `).join('');
      const mB = d.B.map(m => `
        <div class="meth-dim">
          <div class="meth-dim-t">${m.t} (max ${m.max})</div>
          <p>${m.d}</p>
        </div>
      `).join('');

      const inner = `
        <div class="meth-group-title">Score A â€“ ${DATASETS[DATASET].scoreA_lbl}</div>
        ${mA}
        <div class="meth-group-title">Score B â€“ ${DATASETS[DATASET].scoreB_lbl}</div>
        ${mB}
        <div class="meth-note">Methodik angepasst fÃ¼r ${DATASETS[DATASET].lbl}.</div>
      `;
      document.querySelector('.meth-inner').innerHTML = inner;
    }

    function sortedGrp() {
      return [...GRP].sort((a, b) => {
        if (SORT === 'score') return gTot(b.id) - gTot(a.id);
        if (SORT === 'count') return getFilteredItems(b.id).length - getFilteredItems(a.id).length;
        if (SORT === 'alpha') return a.name.localeCompare(b.name);
        if (SORT === 'oldest') {
          const f = id => {
            const arr = getFilteredItems(id);
            return arr.length ? Math.min(...arr.map(i => i.y)) : 9999;
          };
          return f(a.id) - f(b.id);
        }
        return 0;
      });
    }

    function shadeCol(hex, idx, total) {
      const t = total <= 1 ? 0.78 : 0.50 + 0.50 * (idx / (total - 1));
      const n = parseInt(hex.replace('#', ''), 16);
      const r = Math.min(255, Math.round(((n >> 16) & 0xff) * t));
      const g = Math.min(255, Math.round(((n >> 8) & 0xff) * t));
      const b = Math.min(255, Math.round((n & 0xff) * t));
      return `rgb(${r},${g},${b})`;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MEASURE
    // Returns { chartH, plotW } based on current DOM
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function measure() {
      const shell = document.getElementById('shell');
      if (!shell) return { chartH: 300, plotW: 600 };
      const shellH = shell.clientHeight;
      // x-strip height ~ 30px, top padding 0.85rem~13px
      const chartH = Math.max(120, shellH - 44);
      // plotW measured from cBody width minus y-col(40px) + paddings(2.5rem+0.9rem = ~54px)
      const bodyW = document.getElementById('cBody').clientWidth || shell.clientWidth;
      const plotW = Math.max(100, bodyW - 40 - 54);
      return { chartH, plotW };
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // TOOLTIP
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const TT = document.getElementById('tt');
    function showTT(e, inv, col) {
      const g = GM[inv.g];
      const sc = calcScore(inv);
      document.getElementById('ttYr').textContent = fmtY(inv.y);
      document.getElementById('ttNm').textContent = inv.n;
      document.getElementById('ttGrp').innerHTML = `<span style="color:${g.col}">â— ${g.name}</span>`;
      document.getElementById('ttCat').textContent = 'ğŸ“ ' + inv.c;
      document.getElementById('ttDsc').textContent = inv.dsc;
      document.getElementById('ttRl').textContent = VIEW === 'revolution' ? 'Score B' : 'Score A';
      document.getElementById('ttRf').style.cssText = `width:${sc}%;background:${col};`;
      document.getElementById('ttRn').textContent = sc;
      TT.classList.add('on');
      posTT(e);
    }
    function posTT(e) {
      const W = 275, H = 190;
      let x = e.clientX + 14, y = e.clientY - 18;
      if (x + W > window.innerWidth - 4) x = e.clientX - W - 14;
      if (y + H > window.innerHeight - 4) y = e.clientY - H - 4;
      TT.style.left = x + 'px'; TT.style.top = y + 'px';
    }
    function hideTT() { TT.classList.remove('on'); }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MODAL
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function openModal(inv, col) {
      const g = GM[inv.g];
      document.getElementById('mCat').textContent = inv.c;
      document.getElementById('mH').textContent = inv.n;
      document.getElementById('mMeta').innerHTML =
        `<span>ğŸ“… ${fmtY(inv.y)}</span><span>ğŸ‘¤ ${inv.inv}</span><span>ğŸ“ ${inv.org}</span><span style="color:${g.col}">â— ${g.name}</span>`;
      document.getElementById('mImp').textContent = inv.imp;
      document.getElementById('mCtx').textContent = inv.ctx || 'Kontext wird geladen...';
      document.getElementById('mBody').textContent = inv.dsc;
      let dims, lbl;
      const conf = DATASETS[DATASET];
      const meth = conf.meth;

      if (VIEW === 'revolution') {
        lbl = `Score B â€“ ${conf.scoreB_lbl}`;
        dims = meth.B.map((m, i) => {
          // Mapping values to dims based on index is brittle, but efficient for this 1-file setup
          // Order: cbrk, imm, shk
          const val = i === 0 ? inv.cbrk : i === 1 ? inv.imm : inv.shk;
          return { l: `${m.t} (max ${m.max})`, v: val, m: m.max };
        });
      } else {
        lbl = `Score A â€“ ${conf.scoreA_lbl}`;
        dims = meth.A.map((m, i) => {
          // Order: reach, dur, mult, qual
          const val = i === 0 ? inv.reach : i === 1 ? inv.dur : i === 2 ? inv.mult : inv.qual;
          return { l: `${m.t} (max ${m.max})`, v: val, m: m.max };
        });
      }

      document.getElementById('mTotL').textContent = lbl;
      document.getElementById('mTot').textContent = calcScore(inv) + ' / 100';
      document.getElementById('mRows').innerHTML = dims.map(d => `
    <div class="m-row">
      <span class="m-rl">${d.l}</span>
      <div class="m-rb"><div class="m-rf" style="width:${(d.v / d.m) * 100}%;background:${col};"></div></div>
      <span class="m-rn">${d.v}/${d.m}</span>
    </div>`).join('');
      document.getElementById('modalBg').classList.add('on');
    }
    document.getElementById('modalX').addEventListener('click', () => document.getElementById('modalBg').classList.remove('on'));
    document.getElementById('modalBg').addEventListener('click', e => {
      if (e.target === document.getElementById('modalBg')) document.getElementById('modalBg').classList.remove('on');
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // BUILD AXES
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function buildYcol(el, maxV, h) {
      let s = '';
      for (let i = 0; i <= 5; i++) {
        const b = i / 5 * h;
        s += `<div class="ytick" style="bottom:${b}px"><span class="ytick-lbl">${Math.round(maxV * i / 5)}</span><div class="ytick-mk"></div></div>`;
      }
      el.style.height = h + 'px';
      el.innerHTML = s;
    }
    function buildHgrid(el, h) {
      let s = '';
      for (let i = 1; i <= 5; i++) s += `<div class="hgl" style="bottom:${i / 5 * h}px"></div>`;
      el.innerHTML += s;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // RENDER LEGEND
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function renderLegend() {
      const maxT = maxTot();
      document.getElementById('legGrid').innerHTML = GRP.map(g => {
        const tot = gTot(g.id);
        const pct = maxT > 0 ? (tot / maxT) * 100 : 0;
        return `<div class="leg-row">
      <div class="leg-dot" style="background:${g.col}"></div>
      <span class="leg-name">${g.name}</span>
      <div class="leg-bar"><div class="leg-bar-f" style="width:${pct}%;background:${g.col}"></div></div>
      <span class="leg-pts">${tot}</span>
    </div>`;
      }).join('');
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // RENDER GROUPED
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function renderGrouped() {
      const { chartH } = measure();
      const cBody = document.getElementById('cBody');
      const xStrip = document.getElementById('xStrip');
      cBody.innerHTML = ''; xStrip.innerHTML = '';

      document.getElementById('yLbl').textContent =
        VIEW === 'revolution' ? `${DATASETS[DATASET].scoreB_lbl} (kumuliert)` : `${DATASETS[DATASET].scoreA_lbl} (kumuliert)`;

      // C-layout
      const layout = document.createElement('div');
      layout.className = 'c-layout';

      const yCol = document.createElement('div');
      yCol.className = 'y-col';
      buildYcol(yCol, maxTot(), chartH);

      const plot = document.createElement('div');
      plot.className = 'plot';
      plot.style.height = chartH + 'px';
      buildHgrid(plot, chartH);
      const base = document.createElement('div'); base.className = 'base'; plot.appendChild(base);

      // bars
      const barsWrap = document.createElement('div'); barsWrap.className = 'bars';
      const sg = sortedGrp();
      sg.forEach(g => {
        const invs = getFilteredItems(g.id);
        const tot = invs.reduce((s, i) => s + calcScore(i), 0);
        const stackPx = tot > 0 ? Math.round((tot / maxTot()) * chartH) : 0;

        const bg = document.createElement('div'); bg.className = 'bgrp';
        const st = document.createElement('div'); st.className = 'bstk'; st.style.height = stackPx + 'px';
        invs.forEach((inv, idx) => {
          const sc = calcScore(inv);
          const segPx = tot > 0 ? Math.max(2, Math.round((sc / tot) * stackPx)) : 0;
          const seg = document.createElement('div'); seg.className = 'bseg';
          seg.style.height = segPx + 'px';
          seg.style.background = shadeCol(g.col, idx, invs.length);
          seg.addEventListener('mouseenter', e => showTT(e, inv, g.col));
          seg.addEventListener('mousemove', posTT);
          seg.addEventListener('mouseleave', hideTT);
          seg.addEventListener('click', () => { hideTT(); openModal(inv, g.col); });
          st.appendChild(seg);
        });
        bg.appendChild(st);
        barsWrap.appendChild(bg);
      });
      plot.appendChild(barsWrap);
      layout.appendChild(yCol);
      layout.appendChild(plot);
      cBody.appendChild(layout);

      // labels strip
      const gl = document.createElement('div'); gl.className = 'glabels';
      sg.forEach(g => {
        const invs = getFilteredItems(g.id);
        const tot = invs.reduce((s, i) => s + calcScore(i), 0);
        const lc = document.createElement('div'); lc.className = 'glbl';
        lc.innerHTML = `<div class="glbl-n">${g.name}</div><div class="glbl-m">${invs.length} Erf. Â· ${tot}</div>`;
        gl.appendChild(lc);
      });
      xStrip.appendChild(gl);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // RENDER TIMELINE
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function renderTimeline() {
      const cBody = document.getElementById('cBody');
      const xStrip = document.getElementById('xStrip');
      cBody.innerHTML = ''; xStrip.innerHTML = '';
      document.getElementById('yLbl').textContent = 'Score der Erfindung';

      document.getElementById('yLbl').textContent = 'Score der Erfindung';

      const allInvs = getDatasetData()
        .filter(i => calcScore(i) >= MINSC && (CATS.has('all') || CATS.has(i.c)))
        .sort((a, b) => a.y - b.y);

      if (!allInvs.length) {
        cBody.innerHTML = '<div style="display:flex;align-items:center;justify-content:center;flex:1;color:var(--muted);">Keine Erfindungen fÃ¼r diese Filter.</div>';
        return;
      }

      // â”€â”€ Build skeleton to measure actual plot width â”€â”€
      const layout = document.createElement('div'); layout.className = 'c-layout';
      const yCol = document.createElement('div'); yCol.className = 'y-col';
      const plot = document.createElement('div'); plot.className = 'plot'; plot.style.overflow = 'hidden';
      layout.appendChild(yCol); layout.appendChild(plot);
      cBody.appendChild(layout);

      // Force layout so getBoundingClientRect works
      const plotW = plot.getBoundingClientRect().width;
      const { chartH } = measure();

      // Size everything now that we know plotW
      const N = allInvs.length, GAP = 3;
      const BAR_W = Math.max(5, Math.floor((plotW - (N - 1) * GAP) / N));
      const maxSc = Math.max(...allInvs.map(i => calcScore(i)), 1);

      buildYcol(yCol, maxSc, chartH);
      plot.style.height = chartH + 'px';
      buildHgrid(plot, chartH);
      const base = document.createElement('div'); base.className = 'base'; plot.appendChild(base);

      const canvas = document.createElement('div');
      canvas.className = 'tl-canvas';
      canvas.style.width = (N * BAR_W + (N - 1) * GAP) + 'px';
      canvas.style.height = chartH + 'px';

      // Era lines
      const eras = [-10000, -5000, -3000, -1000, 0, 500, 1000, 1500, 1750, 1850, 1900, 1950, 2000];
      eras.forEach(ey => {
        let ci = 0, cd = Infinity;
        allInvs.forEach((inv, idx) => { const d = Math.abs(inv.y - ey); if (d < cd) { cd = d; ci = idx; } });
        if (cd > 500) return;
        const xc = ci * (BAR_W + GAP) + BAR_W / 2;
        const el = document.createElement('div'); el.className = 'tl-era'; el.style.left = xc + 'px'; canvas.appendChild(el);
        const lb = document.createElement('div'); lb.className = 'tl-era-l'; lb.style.left = xc + 'px'; lb.style.bottom = '4px';
        lb.textContent = ey < 0 ? Math.abs(ey) + 'v' : ey === 0 ? '0' : String(ey); canvas.appendChild(lb);
      });

      // Bars
      // Bars
      allInvs.forEach((inv, idx) => {
        const sc = calcScore(inv), bh = Math.max(4, Math.round((sc / maxSc) * chartH));
        const g = GM[inv.g];
        const bar = document.createElement('div'); bar.className = 'tl-bar';
        bar.style.cssText = `left:${idx * (BAR_W + GAP)}px;width:${BAR_W}px;height:${bh}px;background:${g.col};opacity:0.86;`;
        bar.addEventListener('mouseenter', e => showTT(e, inv, g.col));
        bar.addEventListener('mousemove', posTT);
        bar.addEventListener('mouseleave', hideTT);
        bar.addEventListener('click', () => { hideTT(); openModal(inv, g.col); });
        canvas.appendChild(bar);
      });

      plot.appendChild(canvas);

      // x-strip info
      const inf = document.createElement('div'); inf.className = 'tlinfo';
      const term = DATASET === 'nobel' ? 'Preise' : 'Erfindungen';
      inf.innerHTML = `â† ${fmtY(allInvs[0].y)} &ensp;Â·&ensp; ${fmtY(allInvs[N - 1].y)} â†’&ensp;&ensp;Farbe = Kulturkreis &ensp;Â·&ensp; HÃ¶he = Score &ensp;Â·&ensp; ${N} ${term} dargestellt`;
      xStrip.appendChild(inf);
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // MAIN RENDER
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function render() {
      renderLegend();
      if (VIEW === 'timeline') renderTimeline();
      else renderGrouped();
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // VIEW DESCRIPTIONS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const DESCS = {
      grouped: 'Balken = Kulturkreise. HÃ¶he = kumulierter Score. Hover = Info, Klick = Details.',
      timeline: 'Chronologischer Zeitstrahl. Jede EntitÃ¤t = ein Balken. HÃ¶he = Score. Farbe = Kulturkreis.',
      revolution: 'Score B bewertet den Bruch mit dem Bestehenden und die unmittelbare ErschÃ¼tterung des Status Quo.',
    };

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // EVENTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    document.getElementById('vtabs').addEventListener('click', e => {
      const t = e.target.closest('.vt'); if (!t) return;
      VIEW = t.dataset.v;
      document.querySelectorAll('.vt').forEach(v => v.classList.toggle('on', v === t));
      document.getElementById('sortSec').style.display = VIEW === 'timeline' ? 'none' : '';
      document.getElementById('vtDesc').textContent = DESCS[VIEW];
      render();
    });

    // DATASET SWITCHER
    document.getElementById('dtabs').addEventListener('click', e => {
      const t = e.target.closest('.vt'); if (!t) return;
      if (t.dataset.d === DATASET) return;

      DATASET = t.dataset.d;
      document.querySelectorAll('#dtabs .vt').forEach(v => v.classList.toggle('on', v === t));

      // Reset Categories to All when switching dataset
      CATS = new Set(['all']);

      updateCategoryChips();
      updateMethodology();
      render();
    });

    document.getElementById('chips').addEventListener('click', e => {
      const b = e.target.closest('.ch'); if (!b) return;
      const cat = b.dataset.c;
      if (cat === 'all') { CATS = new Set(['all']); }
      else { CATS.delete('all'); CATS.has(cat) ? CATS.delete(cat) : CATS.add(cat); if (!CATS.size) CATS.add('all'); }
      document.querySelectorAll('#chips .ch').forEach(c => c.classList.toggle('on', CATS.has(c.dataset.c)));
      render();
    });

    document.getElementById('sortSel').addEventListener('change', e => { SORT = e.target.value; render(); });
    document.getElementById('minSel').addEventListener('change', e => { MINSC = +e.target.value; render(); });

    document.getElementById('methHdr').addEventListener('click', function () {
      this.classList.toggle('on');
      document.getElementById('methBody').classList.toggle('on');
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // RESIZE â†’ RE-RENDER
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    let resizeTimer = null;
    new ResizeObserver(() => {
      clearTimeout(resizeTimer);
      resizeTimer = setTimeout(render, 80);
    }).observe(document.getElementById('shell'));

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // INIT
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    updateMethodology(); // Init meth
    document.getElementById('vtDesc').textContent = DESCS['grouped'];
    render();
  </script>
</body>

</html>